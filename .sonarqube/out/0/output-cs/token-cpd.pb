å
KC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\App_Start\BundleConfig.cs
	namespace 	
PawnshopUnchuMVC
 
{ 
public 

class 
BundleConfig 
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$str 1
)1 2
)2 3
;3 4
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 9
,9 :
$str 6
,6 7
$str @
,@ A
$str 6
,6 7
$str 2
,2 3
$str 1
,1 2
$str )
,) *
$str 1
,1 2
$str 4
,4 5
$str   4
,  4 5
$str!! 3
,!!3 4
$str"" :
)## 
)## 
;## 
bundles%% 
.%% 
Add%% 
(%% 
new%% 
StyleBundle%% '
(%%' (
$str%%( 7
)%%7 8
.%%8 9
Include%%9 @
(%%@ A
$str&& /
,&&/ 0
$str'' *
,''* +
$str(( )
,(() *
$str)) 0
,))0 1
$str** -
,**- .
$str++ ;
,++; <
$str,, .
,,,. /
$str-- 3
).. 
).. 
;.. 
}// 	
}00 
}11 þ
KC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\App_Start\FilterConfig.cs
	namespace 	
PawnshopUnchuMVC
 
{ 
public 

class 
FilterConfig 
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

  
HandleErrorAttribute

 0
(

0 1
)

1 2
)

2 3
;

3 4
} 	
} 
} Ü
JC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\App_Start\RouteConfig.cs
	namespace 	
PawnshopUnchuMVC
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 3
,3 4
action5 ;
=< =
$str> E
,E F
idG I
=J K
UrlParameterL X
.X Y
OptionalY a
}b c
) 
; 
} 	
} 
} ÿÂ
PC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Controllers\AdminController.cs
	namespace

 	
PawnshopUnchuMVC


 
.

 
Controllers

 &
{ 
public 

class 
AdminController  
:! "

Controller# -
{ 
public 
ActionResult 

AdminIndex &
(& '
)' (
{ 	
var 
idUser 
= 
System 
.  
Web  #
.# $
HttpContext$ /
./ 0
Current0 7
.7 8
Session8 ?
[? @
$str@ D
]D E
;E F
if 
( 
idUser 
== 
null 
) 
{ 
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 7
)7 8
;8 9
} 
else 
{ 
	@ViewData 
[ 
$str 
] 
=  !
idUser" (
;( )
} 
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Logout "
(" #
)# $
{   	
System"" 
."" 
Web"" 
."" 
HttpContext"" "
.""" #
Current""# *
.""* +
Session""+ 2
[""2 3
$str""3 7
]""7 8
=""9 :
null""; ?
;""? @
return## 
RedirectToAction## #
(### $
$str##$ +
,##+ ,
$str##- 3
)##3 4
;##4 5
}$$ 	
public&& 
ActionResult&& 
AdminRegServices&& ,
(&&, -
)&&- .
{'' 	
return(( 
View(( 
((( 
)(( 
;(( 
})) 	
[++ 	
HttpPost++	 
]++ 
public,, 
ActionResult,, 
AdminRegServices,, ,
(,,, -
tblServices,,- 8

collection,,9 C
),,C D
{-- 	
try.. 
{// 
SqlParameter11 
param111 #
=11$ %
new11& )
SqlParameter11* 6
(116 7
$str117 >
,11> ?

collection11@ J
.11J K
servName11K S
)11S T
;11T U
var22 
db22 
=22 
new22 '
DBPawnshopEntitiesConection22 8
(228 9
)229 :
;22: ;
var33 
data33 
=33 
db33 
.33 
Database33 &
.33& '
ExecuteSqlCommand33' 8
(338 9
$str339 L
,33L M
param133N T
)33T U
;33U V
TempData44 
[44 
$str44 !
]44! "
=44# $
$str44% )
;44) *
	@ViewData55 
[55 
$str55 
]55 
=55  !
TempData55" *
[55* +
$str55+ 3
]553 4
;554 5
return66 
View66 
(66 
)66 
;66 
}77 
catch88 
(88 
	Exception88 
e88 
)88 
{99 
return:: 
View:: 
(:: 
e:: 
.:: 
Message:: %
)::% &
;::& '
};; 
}<< 	
public>> 
ActionResult>> 
AdminEditServices>> -
(>>- .
)>>. /
{?? 	'
DBPawnshopEntitiesConectionAA '
dbAA( *
=AA+ ,
newAA- 0'
DBPawnshopEntitiesConectionAA1 L
(AAL M
)AAM N
;AAN O
varBB 
getServicesBB 
=BB 
dbBB  
.BB  !
tblServicesBB! ,
.BB, -
ToListBB- 3
(BB3 4
)BB4 5
;BB5 6

SelectListCC 
listCC 
=CC 
newCC !

SelectListCC" ,
(CC, -
getServicesCC- 8
,CC8 9
$strCC: B
,CCB C
$strCCD N
)CCN O
;CCO P
ViewBagDD 
.DD 
ServicesDD 
=DD 
listDD #
;DD# $
returnEE 
ViewEE 
(EE 
)EE 
;EE 
}FF 	
[HH 	
HttpPostHH	 
]HH 
publicII 
ActionResultII 
AdminEditServicesII -
(II- .
SelectListItemII. <
itemII= A
)IIA B
{JJ 	
varLL 
optionValueLL 
=LL 
RequestLL %
.LL% &
FormLL& *
[LL* +
$strLL+ 6
]LL6 7
;LL7 8
SystemMM 
.MM 
WebMM 
.MM 
HttpContextMM "
.MM" #
CurrentMM# *
.MM* +
SessionMM+ 2
[MM2 3
$strMM3 ;
]MM; <
=MM= >
optionValueMM? J
;MMJ K
returnNN 
RedirectToActionNN #
(NN# $
$strNN$ 8
)NN8 9
;NN9 :
}OO 	
publicQQ 
ActionResultQQ 
AdminEditServices2QQ .
(QQ. /
)QQ/ 0
{RR 	
stringTT 

idServicioTT 
=TT 
SystemTT  &
.TT& '
WebTT' *
.TT* +
HttpContextTT+ 6
.TT6 7
CurrentTT7 >
.TT> ?
SessionTT? F
[TTF G
$strTTG O
]TTO P
.TTP Q
ToStringTTQ Y
(TTY Z
)TTZ [
;TT[ \
varUU 
dbUU 
=UU 
newUU '
DBPawnshopEntitiesConectionUU 4
(UU4 5
)UU5 6
;UU6 7
SqlParameterVV 
param1VV 
=VV  !
newVV" %
SqlParameterVV& 2
(VV2 3
$strVV3 8
,VV8 9

idServicioVV: D
)VVD E
;VVE F
varWW 
dataWW 
=WW 
dbWW 
.WW 
DatabaseWW "
.WW" #
SqlQueryWW# +
<WW+ ,
tblServicesWW, 7
>WW7 8
(WW8 9
$strWW9 J
,WWJ K
param1WWL R
)WWR S
.WWS T
FirstOrDefaultWWT b
(WWb c
)WWc d
;WWd e
returnXX 
ViewXX 
(XX 
dataXX 
)XX 
;XX 
}YY 	
[[[ 	
HttpPost[[	 
][[ 
public\\ 
ActionResult\\ 
AdminEditServices2\\ .
(\\. /
tblServices\\/ :

collection\\; E
)\\E F
{]] 	
try^^ 
{__ 
stringaa 
idServiciosaa "
=aa# $
Systemaa% +
.aa+ ,
Webaa, /
.aa/ 0
HttpContextaa0 ;
.aa; <
Currentaa< C
.aaC D
SessionaaD K
[aaK L
$straaL T
]aaT U
.aaU V
ToStringaaV ^
(aa^ _
)aa_ `
;aa` a
varbb 
dbbb 
=bb 
newbb '
DBPawnshopEntitiesConectionbb 8
(bb8 9
)bb9 :
;bb: ;
SqlParametercc 
param1cc #
=cc$ %
newcc& )
SqlParametercc* 6
(cc6 7
$strcc7 <
,cc< =
idServicioscc> I
)ccI J
;ccJ K
SqlParameterdd 
param2dd #
=dd$ %
newdd& )
SqlParameterdd* 6
(dd6 7
$strdd7 >
,dd> ?

collectiondd@ J
.ddJ K
servNameddK S
)ddS T
;ddT U
varee 
dataee 
=ee 
dbee 
.ee 
Databaseee &
.ee& '
ExecuteSqlCommandee' 8
(ee8 9
$stree9 T
,eeT U
param1eeV \
,ee\ ]
param2ee^ d
)eed e
;eee f
TempDataff 
[ff 
$strff !
]ff! "
=ff# $
$strff% )
;ff) *
	@ViewDatagg 
[gg 
$strgg 
]gg 
=gg  !
TempDatagg" *
[gg* +
$strgg+ 3
]gg3 4
;gg4 5
returnhh 
Viewhh 
(hh 
)hh 
;hh 
}ii 
catchjj 
(jj 
	Exceptionjj 
ejj 
)jj 
{kk 
returnll 
Viewll 
(ll 
ell 
.ll 
Messagell %
)ll% &
;ll& '
}mm 
}nn 	
publicpp 
ActionResultpp 
AdminDeleteServicespp /
(pp/ 0
)pp0 1
{qq 	'
DBPawnshopEntitiesConectionss '
dbss( *
=ss+ ,
newss- 0'
DBPawnshopEntitiesConectionss1 L
(ssL M
)ssM N
;ssN O
vartt 
getServicestt 
=tt 
dbtt  
.tt  !
tblServicestt! ,
.tt, -
ToListtt- 3
(tt3 4
)tt4 5
;tt5 6

SelectListuu 
listuu 
=uu 
newuu !

SelectListuu" ,
(uu, -
getServicesuu- 8
,uu8 9
$struu: B
,uuB C
$struuD N
)uuN O
;uuO P
ViewBagvv 
.vv 
Servicesvv 
=vv 
listvv #
;vv# $
returnww 
Viewww 
(ww 
)ww 
;ww 
}xx 	
[zz 	
HttpPostzz	 
]zz 
public{{ 
ActionResult{{ 
AdminDeleteServices{{ /
({{/ 0
SelectListItem{{0 >
item{{? C
){{C D
{|| 	
var~~ 
optionValue~~ 
=~~ 
Request~~ %
.~~% &
Form~~& *
[~~* +
$str~~+ 6
]~~6 7
;~~7 8
System 
. 
Web 
. 
HttpContext "
." #
Current# *
.* +
Session+ 2
[2 3
$str3 ;
]; <
== >
optionValue? J
;J K
return
 
RedirectToAction
 #
(
# $
$str
$ :
)
: ;
;
; <
}
 	
public
 
ActionResult
 "
AdminDeleteServices2
 0
(
0 1
)
1 2
{
 	
string
 

idServicio
 
=
 
System
  &
.
& '
Web
' *
.
* +
HttpContext
+ 6
.
6 7
Current
7 >
.
> ?
Session
? F
[
F G
$str
G O
]
O P
.
P Q
ToString
Q Y
(
Y Z
)
Z [
;
[ \
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9

idServicio
: D
)
D E
;
E F
var
 
data
 
=
 
db
 
.
 
Database
 "
.
" #
SqlQuery
# +
<
+ ,
tblServices
, 7
>
7 8
(
8 9
$str
9 J
,
J K
param1
L R
)
R S
.
S T
SingleOrDefault
T c
(
c d
)
d e
;
e f
return
 
View
 
(
 
data
 
)
 
;
 
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 "
AdminDeleteServices2
 0
(
0 1
FormCollection
1 ?

collection
@ J
)
J K
{
 	
string
 

idServicio
 
=
 
System
  &
.
& '
Web
' *
.
* +
HttpContext
+ 6
.
6 7
Current
7 >
.
> ?
Session
? F
[
F G
$str
G O
]
O P
.
P Q
ToString
Q Y
(
Y Z
)
Z [
;
[ \
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9

idServicio
: D
)
D E
;
E F
db
 
.
 
Database
 
.
 
ExecuteSqlCommand
 )
(
) *
$str
* :
,
: ;
param1
< B
)
B C
;
C D
return
 
RedirectToAction
 #
(
# $
$str
$ 9
)
9 :
;
: ;
}
 	
public
 
ActionResult
 
AdminRegInfo
 (
(
( )
)
) *
{
 	
return
 
View
 
(
 
)
 
;
 
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 
AdminRegInfo
 (
(
( )
tblBusiness
) 4

collection
5 ?
)
? @
{
 	
try
   
{
¡¡ 
SqlParameter
££ 
param1
££ #
=
££$ %
new
££& )
SqlParameter
££* 6
(
££6 7
$str
££7 >
,
££> ?

collection
££@ J
.
££J K
bsName
££K Q
)
££Q R
;
££R S
SqlParameter
¤¤ 
param2
¤¤ #
=
¤¤$ %
new
¤¤& )
SqlParameter
¤¤* 6
(
¤¤6 7
$str
¤¤7 C
,
¤¤C D

collection
¤¤E O
.
¤¤O P

bsLocation
¤¤P Z
)
¤¤Z [
;
¤¤[ \
SqlParameter
¥¥ 
param3
¥¥ #
=
¥¥$ %
new
¥¥& )
SqlParameter
¥¥* 6
(
¥¥6 7
$str
¥¥7 ?
,
¥¥? @

collection
¥¥A K
.
¥¥K L
bsEmail
¥¥L S
)
¥¥S T
;
¥¥T U
SqlParameter
¦¦ 
param4
¦¦ #
=
¦¦$ %
new
¦¦& )
SqlParameter
¦¦* 6
(
¦¦6 7
$str
¦¦7 >
,
¦¦> ?

collection
¦¦@ J
.
¦¦J K
bsBranch
¦¦K S
)
¦¦S T
;
¦¦T U
SqlParameter
§§ 
param5
§§ #
=
§§$ %
new
§§& )
SqlParameter
§§* 6
(
§§6 7
$str
§§7 B
,
§§B C

collection
§§D N
.
§§N O
bsPhone
§§O V
)
§§V W
;
§§W X
var
¨¨ 
db
¨¨ 
=
¨¨ 
new
¨¨ )
DBPawnshopEntitiesConection
¨¨ 8
(
¨¨8 9
)
¨¨9 :
;
¨¨: ;
var
©© 
data
©© 
=
©© 
db
©© 
.
©© 
Database
©© &
.
©©& '
ExecuteSqlCommand
©©' 8
(
©©8 9
$str
©©9 o
,
©©o p
param1
©©q w
,
©©w x
param2
©©x ~
,
©©~ 
param3©© 
,©© 
param4©© 
,©© 
param5©© 
)©© 
;©© 
TempData
ªª 
[
ªª 
$str
ªª !
]
ªª! "
=
ªª# $
$str
ªª% )
;
ªª) *
	@ViewData
«« 
[
«« 
$str
«« 
]
«« 
=
««  !
TempData
««" *
[
««* +
$str
««+ 3
]
««3 4
;
««4 5
return
¬¬ 
View
¬¬ 
(
¬¬ 
)
¬¬ 
;
¬¬ 
}
­­ 
catch
®® 
(
®® 
	Exception
®® 
e
®® 
)
®® 
{
¯¯ 
return
°° 
View
°° 
(
°° 
e
°° 
.
°° 
Message
°° %
)
°°% &
;
°°& '
}
±± 
}
²² 	
public
´´ 
ActionResult
´´ 
AdminEditInfo
´´ )
(
´´) *
)
´´* +
{
µµ 	)
DBPawnshopEntitiesConection
·· '
db
··( *
=
··+ ,
new
··- 0)
DBPawnshopEntitiesConection
··1 L
(
··L M
)
··M N
;
··N O
var
¸¸ 
getInfo
¸¸ 
=
¸¸ 
db
¸¸ 
.
¸¸ 
tblBusiness
¸¸ (
.
¸¸( )
ToList
¸¸) /
(
¸¸/ 0
)
¸¸0 1
;
¸¸1 2

SelectList
¹¹ 
list
¹¹ 
=
¹¹ 
new
¹¹ !

SelectList
¹¹" ,
(
¹¹, -
getInfo
¹¹- 4
,
¹¹4 5
$str
¹¹6 <
,
¹¹< =
$str
¹¹> F
)
¹¹F G
;
¹¹G H
ViewBag
ºº 
.
ºº 
Business
ºº 
=
ºº 
list
ºº #
;
ºº# $
return
»» 
View
»» 
(
»» 
)
»» 
;
»» 
}
¼¼ 	
[
¾¾ 	
HttpPost
¾¾	 
]
¾¾ 
public
¿¿ 
ActionResult
¿¿ 
AdminEditInfo
¿¿ )
(
¿¿) *
SelectListItem
¿¿* 8
item
¿¿9 =
)
¿¿= >
{
ÀÀ 	
var
ÂÂ 
optionValue
ÂÂ 
=
ÂÂ 
Request
ÂÂ %
.
ÂÂ% &
Form
ÂÂ& *
[
ÂÂ* +
$str
ÂÂ+ 8
]
ÂÂ8 9
;
ÂÂ9 :
System
ÃÃ 
.
ÃÃ 
Web
ÃÃ 
.
ÃÃ 
HttpContext
ÃÃ "
.
ÃÃ" #
Current
ÃÃ# *
.
ÃÃ* +
Session
ÃÃ+ 2
[
ÃÃ2 3
$str
ÃÃ3 :
]
ÃÃ: ;
=
ÃÃ< =
optionValue
ÃÃ> I
;
ÃÃI J
return
ÄÄ 
RedirectToAction
ÄÄ #
(
ÄÄ# $
$str
ÄÄ$ 4
)
ÄÄ4 5
;
ÄÄ5 6
}
ÅÅ 	
public
ÇÇ 
ActionResult
ÇÇ 
AdminEditInfo2
ÇÇ *
(
ÇÇ* +
)
ÇÇ+ ,
{
ÈÈ 	
string
ÊÊ 
idBuss
ÊÊ 
=
ÊÊ 
System
ÊÊ "
.
ÊÊ" #
Web
ÊÊ# &
.
ÊÊ& '
HttpContext
ÊÊ' 2
.
ÊÊ2 3
Current
ÊÊ3 :
.
ÊÊ: ;
Session
ÊÊ; B
[
ÊÊB C
$str
ÊÊC J
]
ÊÊJ K
.
ÊÊK L
ToString
ÊÊL T
(
ÊÊT U
)
ÊÊU V
;
ÊÊV W
var
ËË 
db
ËË 
=
ËË 
new
ËË )
DBPawnshopEntitiesConection
ËË 4
(
ËË4 5
)
ËË5 6
;
ËË6 7
SqlParameter
ÌÌ 
param1
ÌÌ 
=
ÌÌ  !
new
ÌÌ" %
SqlParameter
ÌÌ& 2
(
ÌÌ2 3
$str
ÌÌ3 8
,
ÌÌ8 9
idBuss
ÌÌ: @
)
ÌÌ@ A
;
ÌÌA B
var
ÍÍ 
data
ÍÍ 
=
ÍÍ 
db
ÍÍ 
.
ÍÍ 
Database
ÍÍ "
.
ÍÍ" #
SqlQuery
ÍÍ# +
<
ÍÍ+ ,
tblBusiness
ÍÍ, 7
>
ÍÍ7 8
(
ÍÍ8 9
$str
ÍÍ9 I
,
ÍÍI J
param1
ÍÍK Q
)
ÍÍQ R
.
ÍÍR S
FirstOrDefault
ÍÍS a
(
ÍÍa b
)
ÍÍb c
;
ÍÍc d
return
ÎÎ 
View
ÎÎ 
(
ÎÎ 
data
ÎÎ 
)
ÎÎ 
;
ÎÎ 
}
ÏÏ 	
[
ÑÑ 	
HttpPost
ÑÑ	 
]
ÑÑ 
public
ÒÒ 
ActionResult
ÒÒ 
AdminEditInfo2
ÒÒ *
(
ÒÒ* +
tblBusiness
ÒÒ+ 6

collection
ÒÒ7 A
)
ÒÒA B
{
ÓÓ 	
try
ÔÔ 
{
ÕÕ 
string
×× 
idBuss
×× 
=
×× 
System
××  &
.
××& '
Web
××' *
.
××* +
HttpContext
××+ 6
.
××6 7
Current
××7 >
.
××> ?
Session
××? F
[
××F G
$str
××G N
]
××N O
.
××O P
ToString
××P X
(
××X Y
)
××Y Z
;
××Z [
var
ØØ 
db
ØØ 
=
ØØ 
new
ØØ )
DBPawnshopEntitiesConection
ØØ 8
(
ØØ8 9
)
ØØ9 :
;
ØØ: ;
SqlParameter
ÙÙ 
param1
ÙÙ #
=
ÙÙ$ %
new
ÙÙ& )
SqlParameter
ÙÙ* 6
(
ÙÙ6 7
$str
ÙÙ7 <
,
ÙÙ< =
idBuss
ÙÙ> D
)
ÙÙD E
;
ÙÙE F
SqlParameter
ÚÚ 
param2
ÚÚ #
=
ÚÚ$ %
new
ÚÚ& )
SqlParameter
ÚÚ* 6
(
ÚÚ6 7
$str
ÚÚ7 >
,
ÚÚ> ?

collection
ÚÚ@ J
.
ÚÚJ K
bsName
ÚÚK Q
)
ÚÚQ R
;
ÚÚR S
SqlParameter
ÛÛ 
param3
ÛÛ #
=
ÛÛ$ %
new
ÛÛ& )
SqlParameter
ÛÛ* 6
(
ÛÛ6 7
$str
ÛÛ7 C
,
ÛÛC D

collection
ÛÛE O
.
ÛÛO P

bsLocation
ÛÛP Z
)
ÛÛZ [
;
ÛÛ[ \
SqlParameter
ÜÜ 
param4
ÜÜ #
=
ÜÜ$ %
new
ÜÜ& )
SqlParameter
ÜÜ* 6
(
ÜÜ6 7
$str
ÜÜ7 ?
,
ÜÜ? @

collection
ÜÜA K
.
ÜÜK L
bsEmail
ÜÜL S
)
ÜÜS T
;
ÜÜT U
SqlParameter
ÝÝ 
param5
ÝÝ #
=
ÝÝ$ %
new
ÝÝ& )
SqlParameter
ÝÝ* 6
(
ÝÝ6 7
$str
ÝÝ7 >
,
ÝÝ> ?

collection
ÝÝ@ J
.
ÝÝJ K
bsBranch
ÝÝK S
)
ÝÝS T
;
ÝÝT U
SqlParameter
ÞÞ 
param6
ÞÞ #
=
ÞÞ$ %
new
ÞÞ& )
SqlParameter
ÞÞ* 6
(
ÞÞ6 7
$str
ÞÞ7 B
,
ÞÞB C

collection
ÞÞD N
.
ÞÞN O
bsPhone
ÞÞO V
)
ÞÞV W
;
ÞÞW X
var
ßß 
data
ßß 
=
ßß 
db
ßß 
.
ßß 
Database
ßß &
.
ßß& '
ExecuteSqlCommand
ßß' 8
(
ßß8 9
$str
ßß9 v
,
ßßv w
param1
ßßx ~
,
ßß~ 
param2ßß 
,ßß 
param3ßß 
,ßß 
param4ßß 
,ßß 
param5ßß 
,ßß 
param6ßß ¥
)ßß¥ ¦
;ßß¦ §
TempData
àà 
[
àà 
$str
àà !
]
àà! "
=
àà# $
$str
àà% )
;
àà) *
	@ViewData
áá 
[
áá 
$str
áá 
]
áá 
=
áá  !
TempData
áá" *
[
áá* +
$str
áá+ 3
]
áá3 4
;
áá4 5
return
ââ 
View
ââ 
(
ââ 
)
ââ 
;
ââ 
}
ãã 
catch
ää 
(
ää 
	Exception
ää 
e
ää 
)
ää 
{
åå 
return
ææ 
View
ææ 
(
ææ 
e
ææ 
.
ææ 
Message
ææ %
)
ææ% &
;
ææ& '
}
çç 
}
èè 	
public
êê 
ActionResult
êê 
AdminDeleteInfo
êê +
(
êê+ ,
)
êê, -
{
ëë 	)
DBPawnshopEntitiesConection
íí '
db
íí( *
=
íí+ ,
new
íí- 0)
DBPawnshopEntitiesConection
íí1 L
(
ííL M
)
ííM N
;
ííN O
var
îî 
getInfo
îî 
=
îî 
db
îî 
.
îî 
tblBusiness
îî (
.
îî( )
ToList
îî) /
(
îî/ 0
)
îî0 1
;
îî1 2

SelectList
ïï 
list
ïï 
=
ïï 
new
ïï !

SelectList
ïï" ,
(
ïï, -
getInfo
ïï- 4
,
ïï4 5
$str
ïï6 <
,
ïï< =
$str
ïï> F
)
ïïF G
;
ïïG H
ViewBag
ðð 
.
ðð 
Business
ðð 
=
ðð 
list
ðð #
;
ðð# $
return
ññ 
View
ññ 
(
ññ 
)
ññ 
;
ññ 
}
òò 	
[
ôô 	
HttpPost
ôô	 
]
ôô 
public
õõ 
ActionResult
õõ 
AdminDeleteInfo
õõ +
(
õõ+ ,
SelectListItem
õõ, :
item
õõ; ?
)
õõ? @
{
öö 	
var
øø 
optionValue
øø 
=
øø 
Request
øø %
.
øø% &
Form
øø& *
[
øø* +
$str
øø+ 8
]
øø8 9
;
øø9 :
System
ùù 
.
ùù 
Web
ùù 
.
ùù 
HttpContext
ùù "
.
ùù" #
Current
ùù# *
.
ùù* +
Session
ùù+ 2
[
ùù2 3
$str
ùù3 :
]
ùù: ;
=
ùù< =
optionValue
ùù> I
;
ùùI J
return
úú 
RedirectToAction
úú #
(
úú# $
$str
úú$ 6
)
úú6 7
;
úú7 8
}
ûû 	
public
ýý 
ActionResult
ýý 
AdminDeleteInfo2
ýý ,
(
ýý, -
)
ýý- .
{
þþ 	
string
 
idBus
 
=
 
System
 !
.
! "
Web
" %
.
% &
HttpContext
& 1
.
1 2
Current
2 9
.
9 :
Session
: A
[
A B
$str
B I
]
I J
.
J K
ToString
K S
(
S T
)
T U
;
U V
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9
idBus
: ?
)
? @
;
@ A
var
 
data
 
=
 
db
 
.
 
Database
 "
.
" #
SqlQuery
# +
<
+ ,
tblBusiness
, 7
>
7 8
(
8 9
$str
9 I
,
I J
param1
K Q
)
Q R
.
R S
SingleOrDefault
S b
(
b c
)
c d
;
d e
return
 
View
 
(
 
data
 
)
 
;
 
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 
AdminDeleteInfo2
 ,
(
, -
FormCollection
- ;

collection
< F
)
F G
{
 	
string
 
idBus
 
=
 
System
 !
.
! "
Web
" %
.
% &
HttpContext
& 1
.
1 2
Current
2 9
.
9 :
Session
: A
[
A B
$str
B I
]
I J
.
J K
ToString
K S
(
S T
)
T U
;
U V
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9
idBus
: ?
)
? @
;
@ A
db
 
.
 
Database
 
.
 
ExecuteSqlCommand
 )
(
) *
$str
* 9
,
9 :
param1
; A
)
A B
;
B C
return
 
RedirectToAction
 #
(
# $
$str
$ 5
)
5 6
;
6 7
}
 	
public
 
ActionResult
 
AdminNewSolicitud
 -
(
- .
)
. /
{
 	)
DBPawnshopEntitiesConection
 '
db
( *
=
+ ,
new
- 0)
DBPawnshopEntitiesConection
1 L
(
L M
)
M N
;
N O
var
 
data
 
=
 
db
 
.
 
Database
 "
.
" #
SqlQuery
# +
<
+ ,
tblSolicitude
, 9
>
9 :
(
: ;
$str
; N
)
N O
;
O P
return
 
View
 
(
 
data
 
.
 
ToList
 #
(
# $
)
$ %
)
% &
;
& '
}
 	
public
 
ActionResult
 
DetailsUser
 '
(
' (
string
( .
id
/ 1
)
1 2
{
 	
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9
id
: <
)
< =
;
= >
var
 
dataList
 
=
 
db
 
.
 
Database
 &
.
& '
SqlQuery
' /
<
/ 0
tblSolicitude
0 =
>
= >
(
> ?
$str
? T
,
T U
param1
V \
)
\ ]
.
] ^
ToList
^ d
(
d e
)
e f
;
f g
var
 
tipos
 
=
 
dataList
  
.
  !
Select
! '
(
' (
x
( )
=>
* ,
x
- .
.
. /
	solUserID
/ 8
)
8 9
;
9 :
String
 
tipo
 
=
 
tipos
 
.
  
First
  %
(
% &
)
& '
.
' (
ToString
( 0
(
0 1
)
1 2
;
2 3
SqlParameter
 
parame1
  
=
! "
new
# &
SqlParameter
' 3
(
3 4
$str
4 :
,
: ;
tipo
< @
)
@ A
;
A B
var
   
data
   
=
   
db
   
.
   
Database
   "
.
  " #
SqlQuery
  # +
<
  + ,
tblInfoUser
  , 7
>
  7 8
(
  8 9
$str
  9 Q
,
  Q R
parame1
  S Z
)
  Z [
.
  [ \
FirstOrDefault
  \ j
(
  j k
)
  k l
;
  l m
return
¡¡ 
View
¡¡ 
(
¡¡ 
data
¡¡ 
)
¡¡ 
;
¡¡ 
}
¢¢ 	
public
¤¤ 
ActionResult
¤¤ 
DetailsProduct
¤¤ *
(
¤¤* +
string
¤¤+ 1
id
¤¤2 4
)
¤¤4 5
{
¥¥ 	
var
¦¦ 
db
¦¦ 
=
¦¦ 
new
¦¦ )
DBPawnshopEntitiesConection
¦¦ 4
(
¦¦4 5
)
¦¦5 6
;
¦¦6 7
SqlParameter
§§ 
param1
§§ 
=
§§  !
new
§§" %
SqlParameter
§§& 2
(
§§2 3
$str
§§3 8
,
§§8 9
id
§§: <
)
§§< =
;
§§= >
var
©© 
dataList
©© 
=
©© 
db
©© 
.
©© 
Database
©© &
.
©©& '
SqlQuery
©©' /
<
©©/ 0
tblSolicitude
©©0 =
>
©©= >
(
©©> ?
$str
©©? T
,
©©T U
param1
©©V \
)
©©\ ]
.
©©] ^
ToList
©©^ d
(
©©d e
)
©©e f
;
©©f g
var
ªª 
tipos
ªª 
=
ªª 
dataList
ªª  
.
ªª  !
Select
ªª! '
(
ªª' (
x
ªª( )
=>
ªª* ,
x
ªª- .
.
ªª. /
	solUserID
ªª/ 8
)
ªª8 9
;
ªª9 :
String
«« 
tipo
«« 
=
«« 
tipos
«« 
.
««  
First
««  %
(
««% &
)
««& '
.
««' (
ToString
««( 0
(
««0 1
)
««1 2
;
««2 3
var
¬¬ 
nombProd
¬¬ 
=
¬¬ 
dataList
¬¬ #
.
¬¬# $
Select
¬¬$ *
(
¬¬* +
x
¬¬+ ,
=>
¬¬- /
x
¬¬0 1
.
¬¬1 2
solProdName
¬¬2 =
)
¬¬= >
;
¬¬> ?
String
­­ 
	nombProds
­­ 
=
­­ 
nombProd
­­ '
.
­­' (
First
­­( -
(
­­- .
)
­­. /
.
­­/ 0
ToString
­­0 8
(
­­8 9
)
­­9 :
;
­­: ;
SqlParameter
®® 
parama1
®®  
=
®®! "
new
®®# &
SqlParameter
®®' 3
(
®®3 4
$str
®®4 ;
,
®®; <
tipo
®®= A
)
®®A B
;
®®B C
SqlParameter
¯¯ 
parama2
¯¯  
=
¯¯! "
new
¯¯# &
SqlParameter
¯¯' 3
(
¯¯3 4
$str
¯¯4 >
,
¯¯> ?
	nombProds
¯¯@ I
)
¯¯I J
;
¯¯J K
var
±± 
data
±± 
=
±± 
db
±± 
.
±± 
Database
±± "
.
±±" #
SqlQuery
±±# +
<
±±+ ,

tblGarment
±±, 6
>
±±6 7
(
±±7 8
$str
±±8 W
,
±±W X
parama1
±±Y `
,
±±` a
parama2
±±a h
)
±±h i
.
±±i j
ToList
±±j p
(
±±p q
)
±±q r
;
±±r s
var
²² 
idPro
²² 
=
²² 
data
²² 
.
²² 
Select
²² #
(
²²# $
x
²²$ %
=>
²²& (
x
²²) *
.
²²* +
gmtID
²²+ 0
)
²²0 1
;
²²1 2
String
³³ 
idProd
³³ 
=
³³ 
idPro
³³ !
.
³³! "
First
³³" '
(
³³' (
)
³³( )
.
³³) *
ToString
³³* 2
(
³³2 3
)
³³3 4
;
³³4 5
System
´´ 
.
´´ 
Web
´´ 
.
´´ 
HttpContext
´´ "
.
´´" #
Current
´´# *
.
´´* +
Session
´´+ 2
[
´´2 3
$str
´´3 >
]
´´> ?
=
´´@ A
idProd
´´B H
;
´´H I
SqlParameter
¶¶ 
	parametro
¶¶ "
=
¶¶# $
new
¶¶% (
SqlParameter
¶¶) 5
(
¶¶5 6
$str
¶¶6 ;
,
¶¶; <
idProd
¶¶= C
)
¶¶C D
;
¶¶D E
var
·· 
d
·· 
=
·· 
db
·· 
.
·· 
Database
·· 
.
··  
SqlQuery
··  (
<
··( )

tblGarment
··) 3
>
··3 4
(
··4 5
$str
··5 E
,
··E F
	parametro
··G P
)
··P Q
.
··Q R
FirstOrDefault
··R `
(
··` a
)
··a b
;
··b c
return
¸¸ 
View
¸¸ 
(
¸¸ 
d
¸¸ 
)
¸¸ 
;
¸¸ 
}
¹¹ 	
public
ºº 
ActionResult
ºº 
getImage
ºº $
(
ºº$ %
)
ºº% &
{
»» 	
string
½½ 
idProd
½½ 
=
½½ 
System
½½ "
.
½½" #
Web
½½# &
.
½½& '
HttpContext
½½' 2
.
½½2 3
Current
½½3 :
.
½½: ;
Session
½½; B
[
½½B C
$str
½½C N
]
½½N O
.
½½O P
ToString
½½P X
(
½½X Y
)
½½Y Z
;
½½Z [
var
¾¾ 
db
¾¾ 
=
¾¾ 
new
¾¾ )
DBPawnshopEntitiesConection
¾¾ 4
(
¾¾4 5
)
¾¾5 6
;
¾¾6 7

tblGarment
¿¿ 
img
¿¿ 
=
¿¿ 
db
¿¿ 
.
¿¿  

tblGarment
¿¿  *
.
¿¿* +
Find
¿¿+ /
(
¿¿/ 0
idProd
¿¿0 6
)
¿¿6 7
;
¿¿7 8
byte
ÀÀ 
[
ÀÀ 
]
ÀÀ 
	byteImage
ÀÀ 
=
ÀÀ 
img
ÀÀ "
.
ÀÀ" #
gmtImage
ÀÀ# +
;
ÀÀ+ ,
MemoryStream
ÂÂ 
memoryStream
ÂÂ %
=
ÂÂ& '
new
ÂÂ( +
MemoryStream
ÂÂ, 8
(
ÂÂ8 9
	byteImage
ÂÂ9 B
)
ÂÂB C
;
ÂÂC D
System
ÃÃ 
.
ÃÃ 
Drawing
ÃÃ 
.
ÃÃ 
Image
ÃÃ  
image
ÃÃ! &
=
ÃÃ' (
System
ÃÃ) /
.
ÃÃ/ 0
Drawing
ÃÃ0 7
.
ÃÃ7 8
Image
ÃÃ8 =
.
ÃÃ= >

FromStream
ÃÃ> H
(
ÃÃH I
memoryStream
ÃÃI U
)
ÃÃU V
;
ÃÃV W
memoryStream
ÄÄ 
=
ÄÄ 
new
ÄÄ 
MemoryStream
ÄÄ +
(
ÄÄ+ ,
)
ÄÄ, -
;
ÄÄ- .
image
ÅÅ 
.
ÅÅ 
Save
ÅÅ 
(
ÅÅ 
memoryStream
ÅÅ #
,
ÅÅ# $
ImageFormat
ÅÅ% 0
.
ÅÅ0 1
Jpeg
ÅÅ1 5
)
ÅÅ5 6
;
ÅÅ6 7
memoryStream
ÆÆ 
.
ÆÆ 
Position
ÆÆ !
=
ÆÆ" #
$num
ÆÆ$ %
;
ÆÆ% &
return
ÇÇ 
File
ÇÇ 
(
ÇÇ 
memoryStream
ÇÇ $
,
ÇÇ$ %
$str
ÇÇ& 1
)
ÇÇ1 2
;
ÇÇ2 3
}
ÈÈ 	
public
ÉÉ 
ActionResult
ÉÉ  
AdminListSolicitud
ÉÉ .
(
ÉÉ. /
)
ÉÉ/ 0
{
ÊÊ 	)
DBPawnshopEntitiesConection
ËË '
db
ËË( *
=
ËË+ ,
new
ËË- 0)
DBPawnshopEntitiesConection
ËË1 L
(
ËËL M
)
ËËM N
;
ËËN O
var
ÌÌ 
data
ÌÌ 
=
ÌÌ 
db
ÌÌ 
.
ÌÌ 
Database
ÌÌ "
.
ÌÌ" #
SqlQuery
ÌÌ# +
<
ÌÌ+ ,
tblSolicitude
ÌÌ, 9
>
ÌÌ9 :
(
ÌÌ: ;
$str
ÌÌ; O
)
ÌÌO P
;
ÌÌP Q
return
ÍÍ 
View
ÍÍ 
(
ÍÍ 
data
ÍÍ 
.
ÍÍ 
ToList
ÍÍ #
(
ÍÍ# $
)
ÍÍ$ %
)
ÍÍ% &
;
ÍÍ& '
}
ÎÎ 	
public
ÏÏ 
ActionResult
ÏÏ 
CancelSolicitude
ÏÏ ,
(
ÏÏ, -
string
ÏÏ- 3
id
ÏÏ4 6
)
ÏÏ6 7
{
ÐÐ 	
var
ÑÑ 
db
ÑÑ 
=
ÑÑ 
new
ÑÑ )
DBPawnshopEntitiesConection
ÑÑ 4
(
ÑÑ4 5
)
ÑÑ5 6
;
ÑÑ6 7
SqlParameter
ÒÒ 
param1
ÒÒ 
=
ÒÒ  !
new
ÒÒ" %
SqlParameter
ÒÒ& 2
(
ÒÒ2 3
$str
ÒÒ3 8
,
ÒÒ8 9
id
ÒÒ: <
)
ÒÒ< =
;
ÒÒ= >
db
ÓÓ 
.
ÓÓ 
Database
ÓÓ 
.
ÓÓ 
ExecuteSqlCommand
ÓÓ )
(
ÓÓ) *
$str
ÓÓ* ?
,
ÓÓ? @
param1
ÓÓA G
)
ÓÓG H
;
ÓÓH I
TempData
ÔÔ 
[
ÔÔ 
$str
ÔÔ 
]
ÔÔ 
=
ÔÔ  
$str
ÔÔ! %
;
ÔÔ% &
	@ViewData
ÕÕ 
[
ÕÕ 
$str
ÕÕ 
]
ÕÕ 
=
ÕÕ 
TempData
ÕÕ &
[
ÕÕ& '
$str
ÕÕ' /
]
ÕÕ/ 0
;
ÕÕ0 1
return
ÖÖ 
RedirectToAction
ÖÖ #
(
ÖÖ# $
$str
ÖÖ$ 7
)
ÖÖ7 8
;
ÖÖ8 9
}
×× 	
public
ØØ 
ActionResult
ØØ 
ConfirmSolicitude
ØØ -
(
ØØ- .
string
ØØ. 4
id
ØØ5 7
)
ØØ7 8
{
ÙÙ 	
var
ÚÚ 
db
ÚÚ 
=
ÚÚ 
new
ÚÚ )
DBPawnshopEntitiesConection
ÚÚ 4
(
ÚÚ4 5
)
ÚÚ5 6
;
ÚÚ6 7
SqlParameter
ÛÛ 
param1
ÛÛ 
=
ÛÛ  !
new
ÛÛ" %
SqlParameter
ÛÛ& 2
(
ÛÛ2 3
$str
ÛÛ3 8
,
ÛÛ8 9
id
ÛÛ: <
)
ÛÛ< =
;
ÛÛ= >
db
ÜÜ 
.
ÜÜ 
Database
ÜÜ 
.
ÜÜ 
ExecuteSqlCommand
ÜÜ )
(
ÜÜ) *
$str
ÜÜ* @
,
ÜÜ@ A
param1
ÜÜB H
)
ÜÜH I
;
ÜÜI J
TempData
ÝÝ 
[
ÝÝ 
$str
ÝÝ 
]
ÝÝ 
=
ÝÝ  !
$str
ÝÝ" &
;
ÝÝ& '
	@ViewData
ÞÞ 
[
ÞÞ 
$str
ÞÞ 
]
ÞÞ 
=
ÞÞ 
TempData
ÞÞ &
[
ÞÞ& '
$str
ÞÞ' 0
]
ÞÞ0 1
;
ÞÞ1 2
return
ßß 
RedirectToAction
ßß #
(
ßß# $
$str
ßß$ 7
)
ßß7 8
;
ßß8 9
}
àà 	
}
áá 
}ââ ò=
OC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Controllers\HomeController.cs
	namespace 	
PawnshopUnchuMVC
 
. 
Controllers &
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
About !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Service #
(# $
)$ %
{ 	
return 
View 
( 
) 
; 
} 	
public!! 
ActionResult!! 
Login!! !
(!!! "
)!!" #
{"" 	
return$$ 
View$$ 
($$ 
)$$ 
;$$ 
}%% 	
['' 	
HttpPost''	 
]'' 
public(( 
ActionResult(( 
Login(( !
(((! "
tblUser((" )

collection((* 4
)((4 5
{)) 	
try** 
{++ 
var-- 
db-- 
=-- 
new-- '
DBPawnshopEntitiesConection-- 8
(--8 9
)--9 :
;--: ;
SqlParameter.. 
param1.. #
=..$ %
new..& )
SqlParameter..* 6
(..6 7
$str..7 ?
,..? @

collection..A K
...K L
	userEmail..L U
)..U V
;..V W
SqlParameter// 
param2// #
=//$ %
new//& )
SqlParameter//* 6
(//6 7
$str//7 =
,//= >

collection//? I
.//I J
userKey//J Q
)//Q R
;//R S
var00 
data00 
=00 
db00 
.00 
Database00 &
.00& '
SqlQuery00' /
<00/ 0
tblUser000 7
>007 8
(008 9
$str009 W
,00W X
param100Y _
,00_ `
param200a g
)00g h
.00h i
SingleOrDefault00i x
(00x y
)00y z
;00z {
if11 
(11 
data11 
==11 
null11  
)11  !
{22 
TempData33 
[33 
$str33 %
]33% &
=33' (
$str33) -
;33- .
	@ViewData44 
[44 
$str44 "
]44" #
=44$ %
TempData44& .
[44. /
$str44/ 7
]447 8
;448 9
return55 
View55 
(55  
)55  !
;55! "
}66 
else77 
{88 
SqlParameter::  
param3::! '
=::( )
new::* -
SqlParameter::. :
(::: ;
$str::; C
,::C D

collection::E O
.::O P
	userEmail::P Y
)::Y Z
;::Z [
SqlParameter;;  
param4;;! '
=;;( )
new;;* -
SqlParameter;;. :
(;;: ;
$str;;; A
,;;A B

collection;;C M
.;;M N
userKey;;N U
);;U V
;;;V W
var<< 
dataList<<  
=<<! "
db<<# %
.<<% &
Database<<& .
.<<. /
SqlQuery<</ 7
<<<7 8
tblUser<<8 ?
><<? @
(<<@ A
$str<<A _
,<<_ `
param3<<a g
,<<g h
param4<<i o
)<<o p
.<<p q
ToList<<q w
(<<w x
)<<x y
;<<y z
var== 
tipos== 
=== 
dataList==  (
.==( )
Select==) /
(==/ 0
x==0 1
=>==2 4
x==5 6
.==6 7
userType==7 ?
)==? @
;==@ A
String>> 
tipo>> 
=>>  !
tipos>>" '
.>>' (
First>>( -
(>>- .
)>>. /
.>>/ 0
ToString>>0 8
(>>8 9
)>>9 :
;>>: ;
var?? 
ID?? 
=?? 
dataList?? %
.??% &
Select??& ,
(??, -
x??- .
=>??/ 1
x??2 3
.??3 4
ID??4 6
)??6 7
;??7 8
String@@ 
idUser@@ !
=@@" #
ID@@$ &
.@@& '
First@@' ,
(@@, -
)@@- .
.@@. /
ToString@@/ 7
(@@7 8
)@@8 9
;@@9 :
ifBB 
(BB 
tipoBB 
==BB 
$strBB  '
)BB' (
{CC 
SystemDD 
.DD 
WebDD "
.DD" #
HttpContextDD# .
.DD. /
CurrentDD/ 6
.DD6 7
SessionDD7 >
[DD> ?
$strDD? C
]DDC D
=DDE F
idUserDDG M
;DDM N
returnEE 
RedirectToActionEE /
(EE/ 0
$strEE0 <
,EE< =
$strEE> E
)EEE F
;EEF G
}FF 
elseGG 
{HH 
ifJJ 
(JJ 
tipoJJ  
==JJ! #
$strJJ$ *
)JJ* +
{KK 
SystemLL "
.LL" #
WebLL# &
.LL& '
HttpContextLL' 2
.LL2 3
CurrentLL3 :
.LL: ;
SessionLL; B
[LLB C
$strLLC G
]LLG H
=LLI J
idUserLLK Q
;LLQ R
returnMM "
RedirectToActionMM# 3
(MM3 4
$strMM4 ?
,MM? @
$strMMA G
)MMG H
;MMH I
}NN 
elsePP 
{QQ 
returnRR "
ViewRR# '
(RR' (
)RR( )
;RR) *
}SS 
}TT 
}UU 
}VV 
catchWW 
{XX 
returnYY 
ViewYY 
(YY 
)YY 
;YY 
}ZZ 
}[[ 	
public]] 
ActionResult]] 
Create]] "
(]]" #
)]]# $
{^^ 	
return__ 
View__ 
(__ 
)__ 
;__ 
}`` 	
[bb 	
HttpPostbb	 
]bb 
publiccc 
ActionResultcc 
Createcc "
(cc" #
tblUsercc# *

collectioncc+ 5
)cc5 6
{dd 	
vargg 
dbgg 
=gg 
newgg '
DBPawnshopEntitiesConectiongg 8
(gg8 9
)gg9 :
;gg: ;
SqlParameterhh 
param1hh #
=hh$ %
newhh& )
SqlParameterhh* 6
(hh6 7
$strhh7 ?
,hh? @

collectionhhA K
.hhK L
	userEmailhhL U
)hhU V
;hhV W
SqlParameterii 
param2ii #
=ii$ %
newii& )
SqlParameterii* 6
(ii6 7
$strii7 =
,ii= >

collectionii? I
.iiI J
userKeyiiJ Q
)iiQ R
;iiR S
SqlParameterjj 
param3jj #
=jj$ %
newjj& )
SqlParameterjj* 6
(jj6 7
$strjj7 >
,jj> ?

collectionjj@ J
.jjJ K
userTypejjK S
)jjS T
;jjT U
varkk 
datakk 
=kk 
dbkk 
.kk 
Databasekk &
.kk& '
ExecuteSqlCommandkk' 8
(kk8 9
$strkk9 Z
,kkZ [
param1kk\ b
,kkb c
param2kkd j
,kkj k
param3kkl r
)kkr s
;kks t
returnll 
RedirectToActionll '
(ll' (
$strll( /
)ll/ 0
;ll0 1
}mm 	
}nn 
}oo ³
OC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Controllers\UserController.cs
	namespace 	
PawnshopUnchuMVC
 
. 
Controllers &
{ 
public 

class 
UserController 
:  !

Controller" ,
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
var 
idUser 
= 
System 
.  
Web  #
.# $
HttpContext$ /
./ 0
Current0 7
.7 8
Session8 ?
[? @
$str@ D
]D E
;E F
if 
( 
idUser 
== 
null 
) 
{ 
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 7
)7 8
;8 9
} 
else 
{ 
return 
View 
( 
) 
; 
} 
} 	
public!! 
ActionResult!! 
	UserIndex!! %
(!!% &
)!!& '
{"" 	
var$$ 
idUser$$ 
=$$ 
System$$ 
.$$  
Web$$  #
.$$# $
HttpContext$$$ /
.$$/ 0
Current$$0 7
.$$7 8
Session$$8 ?
[$$? @
$str$$@ D
]$$D E
;$$E F
if&& 
(&& 
idUser&& 
==&& 
null&& 
)&& 
{'' 
return(( 
RedirectToAction(( '
(((' (
$str((( /
,((/ 0
$str((1 7
)((7 8
;((8 9
})) 
else** 
{++ 
	@ViewData,, 
[,, 
$str,, 
],, 
=,,  !
idUser,," (
;,,( )
}-- 
return.. 
View.. 
(.. 
).. 
;.. 
}// 	
public11 
ActionResult11 
Logout11 "
(11" #
)11# $
{22 	
System44 
.44 
Web44 
.44 
HttpContext44 "
.44" #
Current44# *
.44* +
Session44+ 2
[442 3
$str443 7
]447 8
=449 :
null44; ?
;44? @
return55 
RedirectToAction55 #
(55# $
$str55$ +
,55+ ,
$str55- 3
)553 4
;554 5
}66 	
public88 
ActionResult88 
AdminRegProduct88 +
(88+ ,
)88, -
{99 	
return:: 
View:: 
(:: 
):: 
;:: 
};; 	
[== 	
HttpPost==	 
]== 
public>> 
ActionResult>> 
AdminRegProduct>> +
(>>+ ,

tblGarment>>, 6

collection>>7 A
)>>A B
{?? 	
try@@ 
{AA 
HttpPostedFileBaseCC "
FileBaseCC# +
=CC, -
RequestCC. 5
.CC5 6
FilesCC6 ;
[CC; <
$numCC< =
]CC= >
;CC> ?
WebImageDD 
imageDD 
=DD  
newDD! $
WebImageDD% -
(DD- .
FileBaseDD. 6
.DD6 7
InputStreamDD7 B
)DDB C
;DDC D
stringEE 
idUserEE 
=EE 
SystemEE  &
.EE& '
WebEE' *
.EE* +
HttpContextEE+ 6
.EE6 7
CurrentEE7 >
.EE> ?
SessionEE? F
[EEF G
$strEEG K
]EEK L
.EEL M
ToStringEEM U
(EEU V
)EEV W
;EEW X
SqlParameterFF 
param1FF #
=FF$ %
newFF& )
SqlParameterFF* 6
(FF6 7
$strFF7 >
,FF> ?

collectionFF@ J
.FFJ K
gmtNameFFK R
)FFR S
;FFS T
SqlParameterGG 
param2GG #
=GG$ %
newGG& )
SqlParameterGG* 6
(GG6 7
$strGG7 >
,GG> ?

collectionGG@ J
.GGJ K
gmtTypeGGK R
)GGR S
;GGS T
SqlParameterHH 
param3HH #
=HH$ %
newHH& )
SqlParameterHH* 6
(HH6 7
$strHH7 C
,HHC D

collectionHHE O
.HHO P
gmtConditionHHP \
)HH\ ]
;HH] ^
SqlParameterII 
param4II #
=II$ %
newII& )
SqlParameterII* 6
(II6 7
$strII7 @
,II@ A

collectionIIB L
.IIL M
gmtPriceIIM U
)IIU V
;IIV W
SqlParameterJJ 
param5JJ #
=JJ$ %
newJJ& )
SqlParameterJJ* 6
(JJ6 7
$strJJ7 >
,JJ> ?
idUserJJ@ F
)JJF G
;JJG H
SqlParameterKK 
param6KK #
=KK$ %
newKK& )
SqlParameterKK* 6
(KK6 7
$strKK7 =
,KK= >

collectionKK? I
.KKI J
gmtImageKKJ R
=KKS T
imageKKU Z
.KKZ [
GetBytesKK[ c
(KKc d
)KKd e
)KKe f
;KKf g
varMM 
dbMM 
=MM 
newMM '
DBPawnshopEntitiesConectionMM 8
(MM8 9
)MM9 :
;MM: ;
dbNN 
.NN 
DatabaseNN 
.NN 
ExecuteSqlCommandNN -
(NN- .
$strNN. f
,NNf g
param1NNh n
,NNn o
param2NNp v
,NNv w
param3NNx ~
,NN~ 
param4
NN 
,
NN 
param5
NN 
,
NN 
param6
NN 
)
NN 
;
NN 
TempDataOO 
[OO 
$strOO !
]OO! "
=OO# $
$strOO% )
;OO) *
	@ViewDataPP 
[PP 
$strPP 
]PP 
=PP  !
TempDataPP" *
[PP* +
$strPP+ 3
]PP3 4
;PP4 5
returnQQ 
ViewQQ 
(QQ 
)QQ 
;QQ 
}RR 
catchSS 
(SS 
	ExceptionSS 
eSS 
)SS 
{TT 
returnUU 
ViewUU 
(UU 
eUU 
.UU 
MessageUU %
)UU% &
;UU& '
}VV 
}WW 	
publicYY 
ActionResultYY 
AdminEditProductYY ,
(YY, -
)YY- .
{ZZ 	
string[[ 
idUser[[ 
=[[ 
System[[ "
.[[" #
Web[[# &
.[[& '
HttpContext[[' 2
.[[2 3
Current[[3 :
.[[: ;
Session[[; B
[[[B C
$str[[C G
][[G H
.[[H I
ToString[[I Q
([[Q R
)[[R S
;[[S T
SqlParameter\\ 
param1\\ 
=\\  !
new\\" %
SqlParameter\\& 2
(\\2 3
$str\\3 8
,\\8 9
idUser\\: @
)\\@ A
;\\A B'
DBPawnshopEntitiesConection]] '
db]]( *
=]]+ ,
new]]- 0'
DBPawnshopEntitiesConection]]1 L
(]]L M
)]]M N
;]]N O
var__ 
getProducts__ 
=__ 
db__  
.__  !
Database__! )
.__) *
SqlQuery__* 2
<__2 3

tblGarment__3 =
>__= >
(__> ?
$str__? S
,__S T
param1__U [
)__[ \
.__\ ]
ToList__] c
(__c d
)__d e
;__e f

SelectList`` 
list`` 
=`` 
new`` !

SelectList``" ,
(``, -
getProducts``- 8
,``8 9
$str``: A
,``A B
$str``C L
)``L M
;``M N
ViewBagaa 
.aa 
Servicesaa 
=aa 
listaa #
;aa# $
returnbb 
Viewbb 
(bb 
)bb 
;bb 
}cc 	
[ee 	
HttpPostee	 
]ee 
publicff 
ActionResultff 
AdminEditProductff ,
(ff, -

tblGarmentff- 7

collectionff8 B
)ffB C
{gg 	
varii 
optionValueii 
=ii 
Requestii %
.ii% &
Formii& *
[ii* +
$strii+ 5
]ii5 6
;ii6 7
Systemjj 
.jj 
Webjj 
.jj 
HttpContextjj "
.jj" #
Currentjj# *
.jj* +
Sessionjj+ 2
[jj2 3
$strjj3 :
]jj: ;
=jj< =
optionValuejj> I
;jjI J
returnkk 
RedirectToActionkk #
(kk# $
$strkk$ 7
)kk7 8
;kk8 9
}ll 	
publicnn 
ActionResultnn 
AdminEditProduct2nn -
(nn- .
)nn. /
{oo 	
stringpp 
idProdpp 
=pp 
Systempp "
.pp" #
Webpp# &
.pp& '
HttpContextpp' 2
.pp2 3
Currentpp3 :
.pp: ;
Sessionpp; B
[ppB C
$strppC J
]ppJ K
.ppK L
ToStringppL T
(ppT U
)ppU V
;ppV W
varrr 
dbrr 
=rr 
newrr '
DBPawnshopEntitiesConectionrr 4
(rr4 5
)rr5 6
;rr6 7
SqlParameterss 
param1ss 
=ss  !
newss" %
SqlParameterss& 2
(ss2 3
$strss3 8
,ss8 9
idProdss: @
)ss@ A
;ssA B
vartt 
datatt 
=tt 
dbtt 
.tt 
Databasett "
.tt" #
SqlQuerytt# +
<tt+ ,

tblGarmenttt, 6
>tt6 7
(tt7 8
$strtt8 H
,ttH I
param1ttJ P
)ttP Q
.ttQ R
FirstOrDefaultttR `
(tt` a
)tta b
;ttb c
returnuu 
Viewuu 
(uu 
datauu 
)uu 
;uu 
}vv 	
[xx 	
HttpPostxx	 
]xx 
[yy 	$
ValidateAntiForgeryTokenyy	 !
]yy! "
publiczz 
ActionResultzz 
AdminEditProduct2zz -
(zz- .

tblGarmentzz. 8

collectionzz9 C
)zzC D
{{{ 	
var}} 
db}} 
=}} 
new}} '
DBPawnshopEntitiesConection}} 4
(}}4 5
)}}5 6
;}}6 7

tblGarment~~ 
_dbp~~ 
=~~ 
new~~ !

tblGarment~~" ,
(~~, -
)~~- .
;~~. /
HttpPostedFileBase 
FileBase '
=( )
Request* 1
.1 2
Files2 7
[7 8
$num8 9
]9 :
;: ;
string
 
idProd
 
=
 
System
 "
.
" #
Web
# &
.
& '
HttpContext
' 2
.
2 3
Current
3 :
.
: ;
Session
; B
[
B C
$str
C J
]
J K
.
K L
ToString
L T
(
T U
)
U V
;
V W
string
 
idUser
 
=
 
System
 "
.
" #
Web
# &
.
& '
HttpContext
' 2
.
2 3
Current
3 :
.
: ;
Session
; B
[
B C
$str
C G
]
G H
.
H I
ToString
I Q
(
Q R
)
R S
;
S T
if
 
(
 
FileBase
 
.
 
ContentLength
 &
==
' )
$num
* +
)
+ ,
{
 
_dbp
 
=
 
db
 
.
 

tblGarment
 $
.
$ %
Find
% )
(
) *
idProd
* 0
)
0 1
;
1 2
SqlParameter
 
param1
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 <
,
< =
idProd
> D
)
D E
;
E F
SqlParameter
 
param2
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?

collection
@ J
.
J K
gmtName
K R
)
R S
;
S T
SqlParameter
 
param3
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?

collection
@ J
.
J K
gmtType
K R
)
R S
;
S T
SqlParameter
 
param4
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 C
,
C D

collection
E O
.
O P
gmtCondition
P \
)
\ ]
;
] ^
SqlParameter
 
param5
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 @
,
@ A

collection
B L
.
L M
gmtPrice
M U
)
U V
;
V W
SqlParameter
 
param6
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?
idUser
@ F
)
F G
;
G H
SqlParameter
 
param7
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 =
,
= >

collection
? I
.
I J
gmtImage
J R
=
S T
_dbp
U Y
.
Y Z
gmtImage
Z b
)
b c
;
c d
var
 
data
 
=
 
db
 
.
 
Database
 &
.
& '
ExecuteSqlCommand
' 8
(
8 9
$str
9 z
,
z {
param1| 
, 
param2 
, 
param3 
, 
param4 
, 
param5 ¢
,¢ £
param6¤ ª
,ª «
param7« ±
)± ²
;² ³
TempData
 
[
 
$str
 !
]
! "
=
# $
$str
% )
;
) *
	@ViewData
 
[
 
$str
 
]
 
=
  !
TempData
" *
[
* +
$str
+ 3
]
3 4
;
4 5
return
 
View
 
(
 
)
 
;
 
}
 
else
 
{
 
WebImage
 
image
 
=
  
new
! $
WebImage
% -
(
- .
FileBase
. 6
.
6 7
InputStream
7 B
)
B C
;
C D
SqlParameter
 
param1
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 <
,
< =
idProd
> D
)
D E
;
E F
SqlParameter
 
param2
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?

collection
@ J
.
J K
gmtName
K R
)
R S
;
S T
SqlParameter
 
param3
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?

collection
@ J
.
J K
gmtType
K R
)
R S
;
S T
SqlParameter
 
param4
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 C
,
C D

collection
E O
.
O P
gmtCondition
P \
)
\ ]
;
] ^
SqlParameter
 
param5
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 @
,
@ A

collection
B L
.
L M
gmtPrice
M U
)
U V
;
V W
SqlParameter
 
param6
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?
idUser
@ F
)
F G
;
G H
SqlParameter
 
param7
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 =
,
= >

collection
? I
.
I J
gmtImage
J R
=
S T
image
U Z
.
Z [
GetBytes
[ c
(
c d
)
d e
)
e f
;
f g
var
 
data
 
=
 
db
 
.
 
Database
 &
.
& '
ExecuteSqlCommand
' 8
(
8 9
$str
9 z
,
z {
param1| 
, 
param2 
, 
param3 
, 
param4 
, 
param5 ¢
,¢ £
param6¤ ª
,ª «
param7¬ ²
)² ³
;³ ´
TempData
   
[
   
$str
   !
]
  ! "
=
  # $
$str
  % )
;
  ) *
	@ViewData
¡¡ 
[
¡¡ 
$str
¡¡ 
]
¡¡ 
=
¡¡  !
TempData
¡¡" *
[
¡¡* +
$str
¡¡+ 3
]
¡¡3 4
;
¡¡4 5
return
¢¢ 
View
¢¢ 
(
¢¢ 
)
¢¢ 
;
¢¢ 
}
££ 
}
¤¤ 	
public
¦¦ 
ActionResult
¦¦ 
getImage
¦¦ $
(
¦¦$ %
)
¦¦% &
{
§§ 	
string
©© 
idProd
©© 
=
©© 
System
©© "
.
©©" #
Web
©©# &
.
©©& '
HttpContext
©©' 2
.
©©2 3
Current
©©3 :
.
©©: ;
Session
©©; B
[
©©B C
$str
©©C J
]
©©J K
.
©©K L
ToString
©©L T
(
©©T U
)
©©U V
;
©©V W
var
ªª 
db
ªª 
=
ªª 
new
ªª )
DBPawnshopEntitiesConection
ªª 4
(
ªª4 5
)
ªª5 6
;
ªª6 7

tblGarment
«« 
img
«« 
=
«« 
db
«« 
.
««  

tblGarment
««  *
.
««* +
Find
««+ /
(
««/ 0
idProd
««0 6
)
««6 7
;
««7 8
byte
¬¬ 
[
¬¬ 
]
¬¬ 
	byteImage
¬¬ 
=
¬¬ 
img
¬¬ "
.
¬¬" #
gmtImage
¬¬# +
;
¬¬+ ,
MemoryStream
®® 
memoryStream
®® %
=
®®& '
new
®®( +
MemoryStream
®®, 8
(
®®8 9
	byteImage
®®9 B
)
®®B C
;
®®C D
System
¯¯ 
.
¯¯ 
Drawing
¯¯ 
.
¯¯ 
Image
¯¯  
image
¯¯! &
=
¯¯' (
System
¯¯) /
.
¯¯/ 0
Drawing
¯¯0 7
.
¯¯7 8
Image
¯¯8 =
.
¯¯= >

FromStream
¯¯> H
(
¯¯H I
memoryStream
¯¯I U
)
¯¯U V
;
¯¯V W
memoryStream
°° 
=
°° 
new
°° 
MemoryStream
°° +
(
°°+ ,
)
°°, -
;
°°- .
image
±± 
.
±± 
Save
±± 
(
±± 
memoryStream
±± #
,
±±# $
ImageFormat
±±% 0
.
±±0 1
Jpeg
±±1 5
)
±±5 6
;
±±6 7
memoryStream
²² 
.
²² 
Position
²² !
=
²²" #
$num
²²$ %
;
²²% &
return
³³ 
File
³³ 
(
³³ 
memoryStream
³³ $
,
³³$ %
$str
³³% 0
)
³³0 1
;
³³1 2
}
´´ 	
public
¶¶ 
ActionResult
¶¶  
AdminDeleteProduct
¶¶ .
(
¶¶. /
)
¶¶/ 0
{
·· 	
string
¹¹ 
idUser
¹¹ 
=
¹¹ 
System
¹¹ "
.
¹¹" #
Web
¹¹# &
.
¹¹& '
HttpContext
¹¹' 2
.
¹¹2 3
Current
¹¹3 :
.
¹¹: ;
Session
¹¹; B
[
¹¹B C
$str
¹¹C G
]
¹¹G H
.
¹¹H I
ToString
¹¹I Q
(
¹¹Q R
)
¹¹R S
;
¹¹S T
SqlParameter
ºº 
param1
ºº 
=
ºº  !
new
ºº" %
SqlParameter
ºº& 2
(
ºº2 3
$str
ºº3 8
,
ºº8 9
idUser
ºº: @
)
ºº@ A
;
ººA B)
DBPawnshopEntitiesConection
»» '
db
»»( *
=
»»+ ,
new
»»- 0)
DBPawnshopEntitiesConection
»»1 L
(
»»L M
)
»»M N
;
»»N O
var
¼¼ 
getProducts
¼¼ 
=
¼¼ 
db
¼¼  
.
¼¼  !
Database
¼¼! )
.
¼¼) *
SqlQuery
¼¼* 2
<
¼¼2 3

tblGarment
¼¼3 =
>
¼¼= >
(
¼¼> ?
$str
¼¼? S
,
¼¼S T
param1
¼¼U [
)
¼¼[ \
.
¼¼\ ]
ToList
¼¼] c
(
¼¼c d
)
¼¼d e
;
¼¼e f

SelectList
½½ 
list
½½ 
=
½½ 
new
½½ !

SelectList
½½" ,
(
½½, -
getProducts
½½- 8
,
½½8 9
$str
½½: A
,
½½A B
$str
½½C L
)
½½L M
;
½½M N
ViewBag
¾¾ 
.
¾¾ 
Services
¾¾ 
=
¾¾ 
list
¾¾ #
;
¾¾# $
return
¿¿ 
View
¿¿ 
(
¿¿ 
)
¿¿ 
;
¿¿ 
}
ÀÀ 	
[
ÂÂ 	
HttpPost
ÂÂ	 
]
ÂÂ 
public
ÃÃ 
ActionResult
ÃÃ  
AdminDeleteProduct
ÃÃ .
(
ÃÃ. /

tblGarment
ÃÃ/ 9

collection
ÃÃ: D
)
ÃÃD E
{
ÄÄ 	
var
ÆÆ 
optionValue
ÆÆ 
=
ÆÆ 
Request
ÆÆ %
.
ÆÆ% &
Form
ÆÆ& *
[
ÆÆ* +
$str
ÆÆ+ 5
]
ÆÆ5 6
;
ÆÆ6 7
System
ÇÇ 
.
ÇÇ 
Web
ÇÇ 
.
ÇÇ 
HttpContext
ÇÇ "
.
ÇÇ" #
Current
ÇÇ# *
.
ÇÇ* +
Session
ÇÇ+ 2
[
ÇÇ2 3
$str
ÇÇ3 :
]
ÇÇ: ;
=
ÇÇ< =
optionValue
ÇÇ> I
;
ÇÇI J
return
ÈÈ 
RedirectToAction
ÈÈ #
(
ÈÈ# $
$str
ÈÈ$ 9
)
ÈÈ9 :
;
ÈÈ: ;
}
ÉÉ 	
public
ËË 
ActionResult
ËË !
AdminDeleteProduct2
ËË /
(
ËË/ 0
)
ËË0 1
{
ÌÌ 	
string
ÎÎ 
idProd
ÎÎ 
=
ÎÎ 
System
ÎÎ "
.
ÎÎ" #
Web
ÎÎ# &
.
ÎÎ& '
HttpContext
ÎÎ' 2
.
ÎÎ2 3
Current
ÎÎ3 :
.
ÎÎ: ;
Session
ÎÎ; B
[
ÎÎB C
$str
ÎÎC J
]
ÎÎJ K
.
ÎÎK L
ToString
ÎÎL T
(
ÎÎT U
)
ÎÎU V
;
ÎÎV W
var
ÏÏ 
db
ÏÏ 
=
ÏÏ 
new
ÏÏ )
DBPawnshopEntitiesConection
ÏÏ 4
(
ÏÏ4 5
)
ÏÏ5 6
;
ÏÏ6 7
SqlParameter
ÐÐ 
param1
ÐÐ 
=
ÐÐ  !
new
ÐÐ" %
SqlParameter
ÐÐ& 2
(
ÐÐ2 3
$str
ÐÐ3 8
,
ÐÐ8 9
idProd
ÐÐ: @
)
ÐÐ@ A
;
ÐÐA B
var
ÑÑ 
data
ÑÑ 
=
ÑÑ 
db
ÑÑ 
.
ÑÑ 
Database
ÑÑ "
.
ÑÑ" #
SqlQuery
ÑÑ# +
<
ÑÑ+ ,

tblGarment
ÑÑ, 6
>
ÑÑ6 7
(
ÑÑ7 8
$str
ÑÑ8 H
,
ÑÑH I
param1
ÑÑJ P
)
ÑÑP Q
.
ÑÑQ R
FirstOrDefault
ÑÑR `
(
ÑÑ` a
)
ÑÑa b
;
ÑÑb c
return
ÒÒ 
View
ÒÒ 
(
ÒÒ 
data
ÒÒ 
)
ÒÒ 
;
ÒÒ 
}
ÓÓ 	
[
ÕÕ 	
HttpPost
ÕÕ	 
]
ÕÕ 
public
ÖÖ 
ActionResult
ÖÖ !
AdminDeleteProduct2
ÖÖ /
(
ÖÖ/ 0
FormCollection
ÖÖ0 >

collection
ÖÖ? I
)
ÖÖI J
{
×× 	
string
ÙÙ 
idProd
ÙÙ 
=
ÙÙ 
System
ÙÙ "
.
ÙÙ" #
Web
ÙÙ# &
.
ÙÙ& '
HttpContext
ÙÙ' 2
.
ÙÙ2 3
Current
ÙÙ3 :
.
ÙÙ: ;
Session
ÙÙ; B
[
ÙÙB C
$str
ÙÙC J
]
ÙÙJ K
.
ÙÙK L
ToString
ÙÙL T
(
ÙÙT U
)
ÙÙU V
;
ÙÙV W
var
ÚÚ 
db
ÚÚ 
=
ÚÚ 
new
ÚÚ )
DBPawnshopEntitiesConection
ÚÚ 4
(
ÚÚ4 5
)
ÚÚ5 6
;
ÚÚ6 7
SqlParameter
ÛÛ 
param1
ÛÛ 
=
ÛÛ  !
new
ÛÛ" %
SqlParameter
ÛÛ& 2
(
ÛÛ2 3
$str
ÛÛ3 8
,
ÛÛ8 9
idProd
ÛÛ: @
)
ÛÛ@ A
;
ÛÛA B
db
ÜÜ 
.
ÜÜ 
Database
ÜÜ 
.
ÜÜ 
ExecuteSqlCommand
ÜÜ )
(
ÜÜ) *
$str
ÜÜ* =
,
ÜÜ= >
param1
ÜÜ? E
)
ÜÜE F
;
ÜÜF G
return
ÝÝ 
RedirectToAction
ÝÝ #
(
ÝÝ# $
$str
ÝÝ$ 8
)
ÝÝ8 9
;
ÝÝ9 :
}
ÞÞ 	
public
àà 
ActionResult
àà 
getImageGar
àà '
(
àà' (
string
àà( .
id
àà/ 1
)
àà1 2
{
áá 	
var
ââ 
db
ââ 
=
ââ 
new
ââ )
DBPawnshopEntitiesConection
ââ 4
(
ââ4 5
)
ââ5 6
;
ââ6 7

tblGarment
ãã 
img
ãã 
=
ãã 
db
ãã 
.
ãã  

tblGarment
ãã  *
.
ãã* +
Find
ãã+ /
(
ãã/ 0
id
ãã0 2
)
ãã2 3
;
ãã3 4
byte
ää 
[
ää 
]
ää 
	byteImage
ää 
=
ää 
img
ää "
.
ää" #
gmtImage
ää# +
;
ää+ ,
MemoryStream
åå 
memoryStream
åå %
=
åå& '
new
åå( +
MemoryStream
åå, 8
(
åå8 9
	byteImage
åå9 B
)
ååB C
;
ååC D
System
ææ 
.
ææ 
Drawing
ææ 
.
ææ 
Image
ææ  
image
ææ! &
=
ææ' (
System
ææ) /
.
ææ/ 0
Drawing
ææ0 7
.
ææ7 8
Image
ææ8 =
.
ææ= >

FromStream
ææ> H
(
ææH I
memoryStream
ææI U
)
ææU V
;
ææV W
memoryStream
çç 
=
çç 
new
çç 
MemoryStream
çç +
(
çç+ ,
)
çç, -
;
çç- .
image
èè 
.
èè 
Save
èè 
(
èè 
memoryStream
èè #
,
èè# $
ImageFormat
èè% 0
.
èè0 1
Jpeg
èè1 5
)
èè5 6
;
èè6 7
memoryStream
éé 
.
éé 
Position
éé !
=
éé" #
$num
éé$ %
;
éé% &
return
êê 
File
êê 
(
êê 
memoryStream
êê $
,
êê$ %
$str
êê& 1
)
êê1 2
;
êê2 3
}
ëë 	
public
íí 
ActionResult
íí 
AdminListProduct
íí ,
(
íí, -
)
íí- .
{
îî 	)
DBPawnshopEntitiesConection
ðð '
db
ðð( *
=
ðð+ ,
new
ðð- 0)
DBPawnshopEntitiesConection
ðð1 L
(
ððL M
)
ððM N
;
ððN O
string
ññ 
idUser
ññ 
=
ññ 
System
ññ "
.
ññ" #
Web
ññ# &
.
ññ& '
HttpContext
ññ' 2
.
ññ2 3
Current
ññ3 :
.
ññ: ;
Session
ññ; B
[
ññB C
$str
ññC G
]
ññG H
.
ññH I
ToString
ññI Q
(
ññQ R
)
ññR S
;
ññS T
SqlParameter
òò 
param1
òò 
=
òò  !
new
òò" %
SqlParameter
òò& 2
(
òò2 3
$str
òò3 8
,
òò8 9
idUser
òò: @
)
òò@ A
;
òòA B
var
óó 
data
óó 
=
óó 
db
óó 
.
óó 
Database
óó "
.
óó" #
SqlQuery
óó# +
<
óó+ ,

tblGarment
óó, 6
>
óó6 7
(
óó7 8
$str
óó8 L
,
óóL M
param1
óóN T
)
óóT U
;
óóU V
return
ôô 
View
ôô 
(
ôô 
data
ôô 
.
ôô 
ToList
ôô #
(
ôô# $
)
ôô$ %
)
ôô% &
;
ôô& '
}
õõ 	
public
÷÷ 
ActionResult
÷÷ 
UserRegInfo
÷÷ '
(
÷÷' (
)
÷÷( )
{
øø 	
var
úú 
db
úú 
=
úú 
new
úú )
DBPawnshopEntitiesConection
úú 4
(
úú4 5
)
úú5 6
;
úú6 7
string
ûû 
idUser
ûû 
=
ûû 
System
ûû "
.
ûû" #
Web
ûû# &
.
ûû& '
HttpContext
ûû' 2
.
ûû2 3
Current
ûû3 :
.
ûû: ;
Session
ûû; B
[
ûûB C
$str
ûûC G
]
ûûG H
.
ûûH I
ToString
ûûI Q
(
ûûQ R
)
ûûR S
;
ûûS T
SqlParameter
üü 
param1
üü 
=
üü  !
new
üü" %
SqlParameter
üü& 2
(
üü2 3
$str
üü3 8
,
üü8 9
idUser
üü: @
)
üü@ A
;
üüA B
var
ýý 
data
ýý 
=
ýý 
db
ýý 
.
ýý 
Database
ýý "
.
ýý" #
SqlQuery
ýý# +
<
ýý+ ,
tblInfoUser
ýý, 7
>
ýý7 8
(
ýý8 9
$str
ýý9 R
,
ýýR S
param1
ýýT Z
)
ýýZ [
.
ýý[ \
ToList
ýý\ b
(
ýýb c
)
ýýc d
;
ýýd e
var
þþ 
tipos
þþ 
=
þþ 
data
þþ 
.
þþ 
Select
þþ #
(
þþ# $
x
þþ$ %
=>
þþ& (
x
þþ) *
.
þþ* +
usID
þþ+ /
)
þþ/ 0
;
þþ0 1
if
 
(
 
tipos
 
.
 
FirstOrDefault
 #
(
# $
)
$ %
!=
& (
null
) -
)
- .
{
 
TempData
 
[
 
$str
 "
]
" #
=
$ %
$str
& *
;
* +
	@ViewData
 
[
 
$str
 
]
  
=
! "
TempData
# +
[
+ ,
$str
, 4
]
4 5
;
5 6
return
 
View
 
(
 
)
 
;
 
}
 
else
 
{
 
return
 
View
 
(
 
)
 
;
 
}
 
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 
UserRegInfo
 '
(
' (
tblInfoUser
( 3

collection
4 >
)
> ?
{
 	
try
 
{
 
string
 
idUser
 
=
 
System
  &
.
& '
Web
' *
.
* +
HttpContext
+ 6
.
6 7
Current
7 >
.
> ?
Session
? F
[
F G
$str
G K
]
K L
.
L M
ToString
M U
(
U V
)
V W
;
W X
SqlParameter
 
param1
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 =
,
= >

collection
? I
.
I J
DNI
J M
)
M N
;
N O
SqlParameter
 
param2
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 >
,
> ?

collection
@ J
.
J K
usInfFirstName
K Y
)
Y Z
;
Z [
SqlParameter
 
param3
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 B
,
B C

collection
D N
.
N O
usInfLastNameF
O ]
)
] ^
;
^ _
SqlParameter
 
param4
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 B
,
B C

collection
D N
.
N O
usInfLastNameM
O ]
)
] ^
;
^ _
SqlParameter
 
param5
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 ?
,
? @

collection
A K
.
K L

usInfPhone
L V
)
V W
;
W X
SqlParameter
 
param6
 #
=
$ %
new
& )
SqlParameter
* 6
(
6 7
$str
7 <
,
< =
idUser
> D
)
D E
;
E F
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 8
(
8 9
)
9 :
;
: ;
db
 
.
 
Database
 
.
 
ExecuteSqlCommand
 -
(
- .
$str
. h
,
h i
param1
j p
,
p q
param2
r x
,
x y
param3z 
, 
param4 
, 
param5 
, 
param6 
) 
; 
TempData
 
[
 
$str
 !
]
! "
=
# $
$str
% )
;
) *
	@ViewData
 
[
 
$str
 
]
 
=
  !
TempData
" *
[
* +
$str
+ 3
]
3 4
;
4 5
return
 
View
 
(
 
)
 
;
 
}
 
catch
 
(
 
	Exception
 
e
 
)
 
{
   
return
¡¡ 
View
¡¡ 
(
¡¡ 
e
¡¡ 
.
¡¡ 
Message
¡¡ %
)
¡¡% &
;
¡¡& '
}
¢¢ 
}
££ 	
public
¥¥ 
ActionResult
¥¥ 
UserEditInfo
¥¥ (
(
¥¥( )
)
¥¥) *
{
¦¦ 	
var
¨¨ 
idUser
¨¨ 
=
¨¨ 
System
¨¨ 
.
¨¨  
Web
¨¨  #
.
¨¨# $
HttpContext
¨¨$ /
.
¨¨/ 0
Current
¨¨0 7
.
¨¨7 8
Session
¨¨8 ?
[
¨¨? @
$str
¨¨@ D
]
¨¨D E
;
¨¨E F
var
©© 
db
©© 
=
©© 
new
©© )
DBPawnshopEntitiesConection
©© 4
(
©©4 5
)
©©5 6
;
©©6 7
SqlParameter
ªª 
param1
ªª 
=
ªª  !
new
ªª" %
SqlParameter
ªª& 2
(
ªª2 3
$str
ªª3 8
,
ªª8 9
idUser
ªª: @
)
ªª@ A
;
ªªA B
var
«« 
data
«« 
=
«« 
db
«« 
.
«« 
Database
«« "
.
««" #
SqlQuery
««# +
<
««+ ,
tblInfoUser
««, 7
>
««7 8
(
««8 9
$str
««9 M
,
««M N
param1
««O U
)
««U V
.
««V W
FirstOrDefault
««W e
(
««e f
)
««f g
;
««g h
return
¬¬ 
View
¬¬ 
(
¬¬ 
data
¬¬ 
)
¬¬ 
;
¬¬ 
}
­­ 	
[
¯¯ 	
HttpPost
¯¯	 
]
¯¯ 
public
°° 
ActionResult
°° 
UserEditInfo
°° (
(
°°( )
tblInfoUser
°°) 4

collection
°°5 ?
)
°°? @
{
±± 	
try
³³ 
{
´´ 
string
µµ 
idUser
µµ 
=
µµ 
System
µµ  &
.
µµ& '
Web
µµ' *
.
µµ* +
HttpContext
µµ+ 6
.
µµ6 7
Current
µµ7 >
.
µµ> ?
Session
µµ? F
[
µµF G
$str
µµG K
]
µµK L
.
µµL M
ToString
µµM U
(
µµU V
)
µµV W
;
µµW X
SqlParameter
¶¶ 
param1
¶¶ #
=
¶¶$ %
new
¶¶& )
SqlParameter
¶¶* 6
(
¶¶6 7
$str
¶¶7 =
,
¶¶= >

collection
¶¶? I
.
¶¶I J
DNI
¶¶J M
)
¶¶M N
;
¶¶N O
SqlParameter
·· 
param2
·· #
=
··$ %
new
··& )
SqlParameter
··* 6
(
··6 7
$str
··7 >
,
··> ?

collection
··@ J
.
··J K
usInfFirstName
··K Y
)
··Y Z
;
··Z [
SqlParameter
¸¸ 
param3
¸¸ #
=
¸¸$ %
new
¸¸& )
SqlParameter
¸¸* 6
(
¸¸6 7
$str
¸¸7 B
,
¸¸B C

collection
¸¸D N
.
¸¸N O
usInfLastNameF
¸¸O ]
)
¸¸] ^
;
¸¸^ _
SqlParameter
¹¹ 
param4
¹¹ #
=
¹¹$ %
new
¹¹& )
SqlParameter
¹¹* 6
(
¹¹6 7
$str
¹¹7 B
,
¹¹B C

collection
¹¹D N
.
¹¹N O
usInfLastNameM
¹¹O ]
)
¹¹] ^
;
¹¹^ _
SqlParameter
ºº 
param5
ºº #
=
ºº$ %
new
ºº& )
SqlParameter
ºº* 6
(
ºº6 7
$str
ºº7 ?
,
ºº? @

collection
ººA K
.
ººK L

usInfPhone
ººL V
)
ººV W
;
ººW X
SqlParameter
»» 
param6
»» #
=
»»$ %
new
»»& )
SqlParameter
»»* 6
(
»»6 7
$str
»»7 <
,
»»< =
idUser
»»> D
)
»»D E
;
»»E F
var
¼¼ 
db
¼¼ 
=
¼¼ 
new
¼¼ )
DBPawnshopEntitiesConection
¼¼ 8
(
¼¼8 9
)
¼¼9 :
;
¼¼: ;
db
½½ 
.
½½ 
Database
½½ 
.
½½ 
ExecuteSqlCommand
½½ -
(
½½- .
$str
½½. o
,
½½o p
param1
½½q w
,
½½w x
param2
½½y 
,½½ 
param3½½ 
,½½ 
param4½½ 
,½½ 
param5½½ 
,½½ 
param6½½ 
)½½  
;½½  ¡
TempData
¾¾ 
[
¾¾ 
$str
¾¾ !
]
¾¾! "
=
¾¾# $
$str
¾¾% )
;
¾¾) *
	@ViewData
¿¿ 
[
¿¿ 
$str
¿¿ 
]
¿¿ 
=
¿¿  !
TempData
¿¿" *
[
¿¿* +
$str
¿¿+ 3
]
¿¿3 4
;
¿¿4 5
return
ÀÀ 
View
ÀÀ 
(
ÀÀ 
)
ÀÀ 
;
ÀÀ 
}
ÁÁ 
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ 
e
ÂÂ 
)
ÂÂ 
{
ÃÃ 
return
ÄÄ 
View
ÄÄ 
(
ÄÄ 
e
ÄÄ 
.
ÄÄ 
Message
ÄÄ %
)
ÄÄ% &
;
ÄÄ& '
}
ÅÅ 
}
ÆÆ 	
public
ÈÈ 
ActionResult
ÈÈ 
UserRegSolicitud
ÈÈ ,
(
ÈÈ, -
)
ÈÈ- .
{
ÉÉ 	
string
ÊÊ 
idUser
ÊÊ 
=
ÊÊ 
System
ÊÊ "
.
ÊÊ" #
Web
ÊÊ# &
.
ÊÊ& '
HttpContext
ÊÊ' 2
.
ÊÊ2 3
Current
ÊÊ3 :
.
ÊÊ: ;
Session
ÊÊ; B
[
ÊÊB C
$str
ÊÊC G
]
ÊÊG H
.
ÊÊH I
ToString
ÊÊI Q
(
ÊÊQ R
)
ÊÊR S
;
ÊÊS T
SqlParameter
ËË 
param1
ËË 
=
ËË  !
new
ËË" %
SqlParameter
ËË& 2
(
ËË2 3
$str
ËË3 8
,
ËË8 9
idUser
ËË: @
)
ËË@ A
;
ËËA B)
DBPawnshopEntitiesConection
ÌÌ '
db
ÌÌ( *
=
ÌÌ+ ,
new
ÌÌ- 0)
DBPawnshopEntitiesConection
ÌÌ1 L
(
ÌÌL M
)
ÌÌM N
;
ÌÌN O
var
ÎÎ 
getProducts
ÎÎ 
=
ÎÎ 
db
ÎÎ  
.
ÎÎ  !
Database
ÎÎ! )
.
ÎÎ) *
SqlQuery
ÎÎ* 2
<
ÎÎ2 3

tblGarment
ÎÎ3 =
>
ÎÎ= >
(
ÎÎ> ?
$str
ÎÎ? S
,
ÎÎS T
param1
ÎÎU [
)
ÎÎ[ \
.
ÎÎ\ ]
ToList
ÎÎ] c
(
ÎÎc d
)
ÎÎd e
;
ÎÎe f

SelectList
ÏÏ 
list
ÏÏ 
=
ÏÏ 
new
ÏÏ !

SelectList
ÏÏ" ,
(
ÏÏ, -
getProducts
ÏÏ- 8
,
ÏÏ8 9
$str
ÏÏ: A
,
ÏÏA B
$str
ÏÏC L
)
ÏÏL M
;
ÏÏM N
ViewBag
ÐÐ 
.
ÐÐ 
Services
ÐÐ 
=
ÐÐ 
list
ÐÐ #
;
ÐÐ# $
return
ÑÑ 
View
ÑÑ 
(
ÑÑ 
)
ÑÑ 
;
ÑÑ 
}
ÒÒ 	
[
ÔÔ 	
HttpPost
ÔÔ	 
]
ÔÔ 
public
ÕÕ 
ActionResult
ÕÕ 
UserRegSolicitud
ÕÕ ,
(
ÕÕ, -

tblGarment
ÕÕ- 7

collection
ÕÕ8 B
)
ÕÕB C
{
ÖÖ 	
var
ØØ 
optionValue
ØØ 
=
ØØ 
Request
ØØ %
.
ØØ% &
Form
ØØ& *
[
ØØ* +
$str
ØØ+ 5
]
ØØ5 6
;
ØØ6 7
System
ÙÙ 
.
ÙÙ 
Web
ÙÙ 
.
ÙÙ 
HttpContext
ÙÙ "
.
ÙÙ" #
Current
ÙÙ# *
.
ÙÙ* +
Session
ÙÙ+ 2
[
ÙÙ2 3
$str
ÙÙ3 :
]
ÙÙ: ;
=
ÙÙ< =
optionValue
ÙÙ> I
;
ÙÙI J
return
ÚÚ 
RedirectToAction
ÚÚ #
(
ÚÚ# $
$str
ÚÚ$ 7
)
ÚÚ7 8
;
ÚÚ8 9
}
ÛÛ 	
public
ÝÝ 
ActionResult
ÝÝ 
UserRegSolicitud2
ÝÝ -
(
ÝÝ- .
)
ÝÝ. /
{
ÞÞ 	
return
ßß 
View
ßß 
(
ßß 
)
ßß 
;
ßß 
}
àà 	
[
ââ 	
HttpPost
ââ	 
]
ââ 
public
ãã 
ActionResult
ãã 
UserRegSolicitud2
ãã -
(
ãã- .
tblSolicitude
ãã. ;

collection
ãã< F
)
ããF G
{
ää 	
string
ææ 
idUser
ææ 
=
ææ 
System
ææ "
.
ææ" #
Web
ææ# &
.
ææ& '
HttpContext
ææ' 2
.
ææ2 3
Current
ææ3 :
.
ææ: ;
Session
ææ; B
[
ææB C
$str
ææC G
]
ææG H
.
ææH I
ToString
ææI Q
(
ææQ R
)
ææR S
;
ææS T
string
çç 
idGar
çç 
=
çç 
System
çç !
.
çç! "
Web
çç" %
.
çç% &
HttpContext
çç& 1
.
çç1 2
Current
çç2 9
.
çç9 :
Session
çç: A
[
ççA B
$str
ççB I
]
ççI J
.
ççJ K
ToString
ççK S
(
ççS T
)
ççT U
;
ççU V
SqlParameter
éé 
param1
éé 
=
éé  !
new
éé" %
SqlParameter
éé& 2
(
éé2 3
$str
éé3 8
,
éé8 9
idUser
éé: @
)
éé@ A
;
ééA B
SqlParameter
êê 
param2
êê 
=
êê  !
new
êê" %
SqlParameter
êê& 2
(
êê2 3
$str
êê3 <
,
êê< =
idGar
êê> C
)
êêC D
;
êêD E
SqlParameter
ëë 
param3
ëë 
=
ëë  !
new
ëë" %
SqlParameter
ëë& 2
(
ëë2 3
$str
ëë3 ;
,
ëë; <

collection
ëë= G
.
ëëG H
solFecha
ëëH P
)
ëëP Q
;
ëëQ R
SqlParameter
ìì 
param4
ìì 
=
ìì  !
new
ìì" %
SqlParameter
ìì& 2
(
ìì2 3
$str
ìì3 :
,
ìì: ;

collection
ìì< F
.
ììF G
solHora
ììG N
)
ììN O
;
ììO P
var
íí 
db
íí 
=
íí 
new
íí )
DBPawnshopEntitiesConection
íí 4
(
íí4 5
)
íí5 6
;
íí6 7
db
îî 
.
îî 
Database
îî 
.
îî 
ExecuteSqlCommand
îî )
(
îî) *
$str
îî* T
,
îîT U
param1
îîV \
,
îî\ ]
param2
îî] c
,
îîc d
param3
îîe k
,
îîk l
param4
îîm s
)
îîs t
;
îît u
TempData
ïï 
[
ïï 
$str
ïï 
]
ïï 
=
ïï  
$str
ïï! %
;
ïï% &
	@ViewData
ðð 
[
ðð 
$str
ðð 
]
ðð 
=
ðð 
TempData
ðð &
[
ðð& '
$str
ðð' /
]
ðð/ 0
;
ðð0 1
return
ññ 
View
ññ 
(
ññ 
)
ññ 
;
ññ 
}
òò 	
public
ôô 
ActionResult
ôô 
UserEditSolicitud
ôô -
(
ôô- .
)
ôô. /
{
õõ 	
string
öö 
idUser
öö 
=
öö 
System
öö "
.
öö" #
Web
öö# &
.
öö& '
HttpContext
öö' 2
.
öö2 3
Current
öö3 :
.
öö: ;
Session
öö; B
[
ööB C
$str
ööC G
]
ööG H
.
ööH I
ToString
ööI Q
(
ööQ R
)
ööR S
;
ööS T
SqlParameter
÷÷ 
param1
÷÷ 
=
÷÷  !
new
÷÷" %
SqlParameter
÷÷& 2
(
÷÷2 3
$str
÷÷3 8
,
÷÷8 9
idUser
÷÷: @
)
÷÷@ A
;
÷÷A B)
DBPawnshopEntitiesConection
øø '
db
øø( *
=
øø+ ,
new
øø- 0)
DBPawnshopEntitiesConection
øø1 L
(
øøL M
)
øøM N
;
øøN O
var
úú 
getSolicitude
úú 
=
úú 
db
úú  "
.
úú" #
Database
úú# +
.
úú+ ,
SqlQuery
úú, 4
<
úú4 5
tblSolicitude
úú5 B
>
úúB C
(
úúC D
$str
úúD \
,
úú\ ]
param1
úú^ d
)
úúd e
.
úúe f
ToList
úúf l
(
úúl m
)
úúm n
;
úún o

SelectList
ûû 
list
ûû 
=
ûû 
new
ûû !

SelectList
ûû" ,
(
ûû, -
getSolicitude
ûû- :
,
ûû: ;
$str
ûû< C
,
ûûC D
$str
ûûE R
)
ûûR S
;
ûûS T
ViewBag
üü 
.
üü 
Services
üü 
=
üü 
list
üü #
;
üü# $
return
ýý 
View
ýý 
(
ýý 
)
ýý 
;
ýý 
}
þþ 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 
UserEditSolicitud
 -
(
- .
tblSolicitude
. ;

collection
< F
)
F G
{
 	
var
 
optionValue
 
=
 
Request
 %
.
% &
Form
& *
[
* +
$str
+ 6
]
6 7
;
7 8
System
 
.
 
Web
 
.
 
HttpContext
 "
.
" #
Current
# *
.
* +
Session
+ 2
[
2 3
$str
3 :
]
: ;
=
< =
optionValue
> I
;
I J
return
 
RedirectToAction
 #
(
# $
$str
$ 8
)
8 9
;
9 :
}
 	
public
 
ActionResult
  
UserEditSolicitud2
 .
(
. /
)
/ 0
{
 	
string
 
idSol
 
=
 
System
 !
.
! "
Web
" %
.
% &
HttpContext
& 1
.
1 2
Current
2 9
.
9 :
Session
: A
[
A B
$str
B I
]
I J
.
J K
ToString
K S
(
S T
)
T U
;
U V
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9
idSol
: ?
)
? @
;
@ A
var
 
data
 
=
 
db
 
.
 
Database
 "
.
" #
SqlQuery
# +
<
+ ,
tblSolicitude
, 9
>
9 :
(
: ;
$str
; R
,
R S
param1
T Z
)
Z [
.
[ \
FirstOrDefault
\ j
(
j k
)
k l
;
l m
return
 
View
 
(
 
data
 
)
 
;
 
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
  
UserEditSolicitud2
 .
(
. /
tblSolicitude
/ <

collection
= G
)
G H
{
 	
string
 
idSol
 
=
 
System
 !
.
! "
Web
" %
.
% &
HttpContext
& 1
.
1 2
Current
2 9
.
9 :
Session
: A
[
A B
$str
B I
]
I J
.
J K
ToString
K S
(
S T
)
T U
;
U V
SqlParameter
 
param1
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 8
,
8 9
idSol
: ?
)
? @
;
@ A
SqlParameter
 
param2
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 ;
,
; <

collection
= G
.
G H
solFecha
H P
)
P Q
;
Q R
SqlParameter
 
param3
 
=
  !
new
" %
SqlParameter
& 2
(
2 3
$str
3 :
,
: ;

collection
< F
.
F G
solHora
G N
)
N O
;
O P
var
 
db
 
=
 
new
 )
DBPawnshopEntitiesConection
 4
(
4 5
)
5 6
;
6 7
db
 
.
 
Database
 
.
 
ExecuteSqlCommand
 )
(
) *
$str
* M
,
M N
param1
O U
,
U V
param2
W ]
,
] ^
param3
_ e
)
e f
;
f g
TempData
 
[
 
$str
 
]
 
=
  
$str
! %
;
% &
	@ViewData
 
[
 
$str
 
]
 
=
 
TempData
 &
[
& '
$str
' /
]
/ 0
;
0 1
return
 
View
 
(
 
)
 
;
 
}
   	
public
¢¢ 
ActionResult
¢¢ 
UserDelSolicitud
¢¢ ,
(
¢¢, -
)
¢¢- .
{
££ 	
string
¤¤ 
idUser
¤¤ 
=
¤¤ 
System
¤¤ "
.
¤¤" #
Web
¤¤# &
.
¤¤& '
HttpContext
¤¤' 2
.
¤¤2 3
Current
¤¤3 :
.
¤¤: ;
Session
¤¤; B
[
¤¤B C
$str
¤¤C G
]
¤¤G H
.
¤¤H I
ToString
¤¤I Q
(
¤¤Q R
)
¤¤R S
;
¤¤S T
SqlParameter
¥¥ 
param1
¥¥ 
=
¥¥  !
new
¥¥" %
SqlParameter
¥¥& 2
(
¥¥2 3
$str
¥¥3 8
,
¥¥8 9
idUser
¥¥: @
)
¥¥@ A
;
¥¥A B)
DBPawnshopEntitiesConection
¦¦ '
db
¦¦( *
=
¦¦+ ,
new
¦¦- 0)
DBPawnshopEntitiesConection
¦¦1 L
(
¦¦L M
)
¦¦M N
;
¦¦N O
var
¨¨ 
getSolicitude
¨¨ 
=
¨¨ 
db
¨¨  "
.
¨¨" #
Database
¨¨# +
.
¨¨+ ,
SqlQuery
¨¨, 4
<
¨¨4 5
tblSolicitude
¨¨5 B
>
¨¨B C
(
¨¨C D
$str
¨¨D \
,
¨¨\ ]
param1
¨¨^ d
)
¨¨d e
.
¨¨e f
ToList
¨¨f l
(
¨¨l m
)
¨¨m n
;
¨¨n o

SelectList
©© 
list
©© 
=
©© 
new
©© !

SelectList
©©" ,
(
©©, -
getSolicitude
©©- :
,
©©: ;
$str
©©< C
,
©©C D
$str
©©E R
)
©©R S
;
©©S T
ViewBag
ªª 
.
ªª 
Services
ªª 
=
ªª 
list
ªª #
;
ªª# $
return
«« 
View
«« 
(
«« 
)
«« 
;
«« 
}
¬¬ 	
[
®® 	
HttpPost
®®	 
]
®® 
public
¯¯ 
ActionResult
¯¯ 
UserDelSolicitud
¯¯ ,
(
¯¯, -
tblSolicitude
¯¯- :

collection
¯¯; E
)
¯¯E F
{
°° 	
var
±± 
optionValue
±± 
=
±± 
Request
±± %
.
±±% &
Form
±±& *
[
±±* +
$str
±±+ 6
]
±±6 7
;
±±7 8
System
²² 
.
²² 
Web
²² 
.
²² 
HttpContext
²² "
.
²²" #
Current
²²# *
.
²²* +
Session
²²+ 2
[
²²2 3
$str
²²3 :
]
²²: ;
=
²²< =
optionValue
²²> I
;
²²I J
return
³³ 
RedirectToAction
³³ #
(
³³# $
$str
³³$ 7
)
³³7 8
;
³³8 9
}
´´ 	
public
¶¶ 
ActionResult
¶¶ 
UserDelSolicitud2
¶¶ -
(
¶¶- .
)
¶¶. /
{
·· 	
string
¸¸ 
idSol
¸¸ 
=
¸¸ 
System
¸¸ !
.
¸¸! "
Web
¸¸" %
.
¸¸% &
HttpContext
¸¸& 1
.
¸¸1 2
Current
¸¸2 9
.
¸¸9 :
Session
¸¸: A
[
¸¸A B
$str
¸¸B I
]
¸¸I J
.
¸¸J K
ToString
¸¸K S
(
¸¸S T
)
¸¸T U
;
¸¸U V
var
ºº 
db
ºº 
=
ºº 
new
ºº )
DBPawnshopEntitiesConection
ºº 4
(
ºº4 5
)
ºº5 6
;
ºº6 7
SqlParameter
»» 
param1
»» 
=
»»  !
new
»»" %
SqlParameter
»»& 2
(
»»2 3
$str
»»3 8
,
»»8 9
idSol
»»: ?
)
»»? @
;
»»@ A
var
¼¼ 
data
¼¼ 
=
¼¼ 
db
¼¼ 
.
¼¼ 
Database
¼¼ "
.
¼¼" #
SqlQuery
¼¼# +
<
¼¼+ ,
tblSolicitude
¼¼, 9
>
¼¼9 :
(
¼¼: ;
$str
¼¼; R
,
¼¼R S
param1
¼¼T Z
)
¼¼Z [
.
¼¼[ \
FirstOrDefault
¼¼\ j
(
¼¼j k
)
¼¼k l
;
¼¼l m
return
½½ 
View
½½ 
(
½½ 
data
½½ 
)
½½ 
;
½½ 
}
¾¾ 	
[
ÀÀ 	
HttpPost
ÀÀ	 
]
ÀÀ 
public
ÁÁ 
ActionResult
ÁÁ 
UserDelSolicitud2
ÁÁ -
(
ÁÁ- .
tblSolicitude
ÁÁ. ;

collection
ÁÁ< F
)
ÁÁF G
{
ÂÂ 	
string
ÄÄ 
idSol
ÄÄ 
=
ÄÄ 
System
ÄÄ !
.
ÄÄ! "
Web
ÄÄ" %
.
ÄÄ% &
HttpContext
ÄÄ& 1
.
ÄÄ1 2
Current
ÄÄ2 9
.
ÄÄ9 :
Session
ÄÄ: A
[
ÄÄA B
$str
ÄÄB I
]
ÄÄI J
.
ÄÄJ K
ToString
ÄÄK S
(
ÄÄS T
)
ÄÄT U
;
ÄÄU V
var
ÅÅ 
db
ÅÅ 
=
ÅÅ 
new
ÅÅ )
DBPawnshopEntitiesConection
ÅÅ 4
(
ÅÅ4 5
)
ÅÅ5 6
;
ÅÅ6 7
SqlParameter
ÆÆ 
param1
ÆÆ 
=
ÆÆ  !
new
ÆÆ" %
SqlParameter
ÆÆ& 2
(
ÆÆ2 3
$str
ÆÆ3 8
,
ÆÆ8 9
idSol
ÆÆ: ?
)
ÆÆ? @
;
ÆÆ@ A
db
ÇÇ 
.
ÇÇ 
Database
ÇÇ 
.
ÇÇ 
ExecuteSqlCommand
ÇÇ )
(
ÇÇ) *
$str
ÇÇ* @
,
ÇÇ@ A
param1
ÇÇB H
)
ÇÇH I
;
ÇÇI J
return
ÈÈ 
RedirectToAction
ÈÈ #
(
ÈÈ# $
$str
ÈÈ$ 6
)
ÈÈ6 7
;
ÈÈ7 8
}
ÉÉ 	
public
ËË 
ActionResult
ËË 
UserListSolicitud
ËË -
(
ËË- .
)
ËË. /
{
ÌÌ 	)
DBPawnshopEntitiesConection
ÍÍ '
db
ÍÍ( *
=
ÍÍ+ ,
new
ÍÍ- 0)
DBPawnshopEntitiesConection
ÍÍ1 L
(
ÍÍL M
)
ÍÍM N
;
ÍÍN O
string
ÎÎ 
idUser
ÎÎ 
=
ÎÎ 
System
ÎÎ "
.
ÎÎ" #
Web
ÎÎ# &
.
ÎÎ& '
HttpContext
ÎÎ' 2
.
ÎÎ2 3
Current
ÎÎ3 :
.
ÎÎ: ;
Session
ÎÎ; B
[
ÎÎB C
$str
ÎÎC G
]
ÎÎG H
.
ÎÎH I
ToString
ÎÎI Q
(
ÎÎQ R
)
ÎÎR S
;
ÎÎS T
SqlParameter
ÏÏ 
param1
ÏÏ 
=
ÏÏ  !
new
ÏÏ" %
SqlParameter
ÏÏ& 2
(
ÏÏ2 3
$str
ÏÏ3 8
,
ÏÏ8 9
idUser
ÏÏ: @
)
ÏÏ@ A
;
ÏÏA B
var
ÐÐ 
data
ÐÐ 
=
ÐÐ 
db
ÐÐ 
.
ÐÐ 
Database
ÐÐ "
.
ÐÐ" #
SqlQuery
ÐÐ# +
<
ÐÐ+ ,
tblSolicitude
ÐÐ, 9
>
ÐÐ9 :
(
ÐÐ: ;
$str
ÐÐ; R
,
ÐÐR S
param1
ÐÐT Z
)
ÐÐZ [
;
ÐÐ[ \
return
ÑÑ 
View
ÑÑ 
(
ÑÑ 
data
ÑÑ 
.
ÑÑ 
ToList
ÑÑ #
(
ÑÑ# $
)
ÑÑ$ %
)
ÑÑ% &
;
ÑÑ& '
}
ÒÒ 	
public
ÔÔ 
ActionResult
ÔÔ 
UserLastMessages
ÔÔ ,
(
ÔÔ, -
)
ÔÔ- .
{
ÕÕ 	)
DBPawnshopEntitiesConection
ÖÖ '
db
ÖÖ( *
=
ÖÖ+ ,
new
ÖÖ- 0)
DBPawnshopEntitiesConection
ÖÖ1 L
(
ÖÖL M
)
ÖÖM N
;
ÖÖN O
string
×× 
idUser
×× 
=
×× 
System
×× "
.
××" #
Web
××# &
.
××& '
HttpContext
××' 2
.
××2 3
Current
××3 :
.
××: ;
Session
××; B
[
××B C
$str
××C G
]
××G H
.
××H I
ToString
××I Q
(
××Q R
)
××R S
;
××S T
SqlParameter
ØØ 
param1
ØØ 
=
ØØ  !
new
ØØ" %
SqlParameter
ØØ& 2
(
ØØ2 3
$str
ØØ3 8
,
ØØ8 9
idUser
ØØ: @
)
ØØ@ A
;
ØØA B
var
ÙÙ 
data
ÙÙ 
=
ÙÙ 
db
ÙÙ 
.
ÙÙ 
Database
ÙÙ "
.
ÙÙ" #
SqlQuery
ÙÙ# +
<
ÙÙ+ ,
tblSolicitude
ÙÙ, 9
>
ÙÙ9 :
(
ÙÙ: ;
$str
ÙÙ; Q
,
ÙÙQ R
param1
ÙÙS Y
)
ÙÙY Z
;
ÙÙZ [
return
ÚÚ 
View
ÚÚ 
(
ÚÚ 
data
ÚÚ 
.
ÚÚ 
ToList
ÚÚ #
(
ÚÚ# $
)
ÚÚ$ %
)
ÚÚ% &
;
ÚÚ& '
}
ÛÛ 	
public
ÜÜ 
ActionResult
ÜÜ 

DetailSoli
ÜÜ &
(
ÜÜ& '
string
ÜÜ' -
id
ÜÜ. 0
)
ÜÜ0 1
{
ÝÝ 	)
DBPawnshopEntitiesConection
ÞÞ '
db
ÞÞ( *
=
ÞÞ+ ,
new
ÞÞ- 0)
DBPawnshopEntitiesConection
ÞÞ1 L
(
ÞÞL M
)
ÞÞM N
;
ÞÞN O
SqlParameter
ßß 
param1
ßß 
=
ßß  !
new
ßß" %
SqlParameter
ßß& 2
(
ßß2 3
$str
ßß3 8
,
ßß8 9
id
ßß: <
)
ßß< =
;
ßß= >
var
áá 
dataList
áá 
=
áá 
db
áá 
.
áá 
Database
áá &
.
áá& '
SqlQuery
áá' /
<
áá/ 0
tblSolicitude
áá0 =
>
áá= >
(
áá> ?
$str
áá? Q
,
ááQ R
param1
ááS Y
)
ááY Z
.
ááZ [
ToList
áá[ a
(
ááa b
)
ááb c
;
áác d
var
ââ 
tipos
ââ 
=
ââ 
dataList
ââ  
.
ââ  !
Select
ââ! '
(
ââ' (
x
ââ( )
=>
ââ* ,
x
ââ- .
.
ââ. /
solProdName
ââ/ :
)
ââ: ;
;
ââ; <
var
ãã 
tipos2
ãã 
=
ãã 
dataList
ãã !
.
ãã! "
Select
ãã" (
(
ãã( )
x
ãã) *
=>
ãã+ -
x
ãã. /
.
ãã/ 0
	solEstado
ãã0 9
)
ãã9 :
;
ãã: ;
String
ää 
solProdName
ää 
=
ää  
tipos
ää! &
.
ää& '
First
ää' ,
(
ää, -
)
ää- .
.
ää. /
ToString
ää/ 7
(
ää7 8
)
ää8 9
;
ää9 :
String
åå 
	solEstado
åå 
=
åå 
tipos2
åå %
.
åå% &
First
åå& +
(
åå+ ,
)
åå, -
.
åå- .
ToString
åå. 6
(
åå6 7
)
åå7 8
;
åå8 9
string
çç 
idUser
çç 
=
çç 
System
çç "
.
çç" #
Web
çç# &
.
çç& '
HttpContext
çç' 2
.
çç2 3
Current
çç3 :
.
çç: ;
Session
çç; B
[
ççB C
$str
ççC G
]
ççG H
.
ççH I
ToString
ççI Q
(
ççQ R
)
ççR S
;
ççS T
SqlParameter
èè 
param2
èè 
=
èè  !
new
èè" %
SqlParameter
èè& 2
(
èè2 3
$str
èè3 8
,
èè8 9
idUser
èè: @
)
èè@ A
;
èèA B
var
éé 
data
éé 
=
éé 
db
éé 
.
éé 
Database
éé "
.
éé" #
SqlQuery
éé# +
<
éé+ ,
tblInfoUser
éé, 7
>
éé7 8
(
éé8 9
$str
éé9 M
,
ééM N
param2
ééO U
)
ééU V
.
ééV W
ToList
ééW ]
(
éé] ^
)
éé^ _
;
éé_ `
var
êê 
tipo1
êê 
=
êê 
data
êê 
.
êê 
Select
êê #
(
êê# $
x
êê$ %
=>
êê& (
x
êê) *
.
êê* +
usInfFirstName
êê+ 9
)
êê9 :
;
êê: ;
var
ëë 
tipo2
ëë 
=
ëë 
data
ëë 
.
ëë 
Select
ëë #
(
ëë# $
x
ëë$ %
=>
ëë& (
x
ëë) *
.
ëë* +
usInfLastNameF
ëë+ 9
)
ëë9 :
;
ëë: ;
var
ìì 
tipo3
ìì 
=
ìì 
data
ìì 
.
ìì 
Select
ìì #
(
ìì# $
x
ìì$ %
=>
ìì& (
x
ìì) *
.
ìì* +
usInfLastNameM
ìì+ 9
)
ìì9 :
;
ìì: ;
String
íí 
userName
íí 
=
íí 
tipo1
íí #
.
íí# $
First
íí$ )
(
íí) *
)
íí* +
.
íí+ ,
ToString
íí, 4
(
íí4 5
)
íí5 6
;
íí6 7
String
îî 
lstNameF
îî 
=
îî 
tipo2
îî #
.
îî# $
First
îî$ )
(
îî) *
)
îî* +
.
îî+ ,
ToString
îî, 4
(
îî4 5
)
îî5 6
;
îî6 7
String
ïï 
lstNameM
ïï 
=
ïï 
tipo3
ïï #
.
ïï# $
First
ïï$ )
(
ïï) *
)
ïï* +
.
ïï+ ,
ToString
ïï, 4
(
ïï4 5
)
ïï5 6
;
ïï6 7
	@ViewData
ññ 
[
ññ 
$str
ññ  
]
ññ  !
=
ññ" #
solProdName
ññ$ /
;
ññ/ 0
	@ViewData
òò 
[
òò 
$str
òò "
]
òò" #
=
òò$ %
	solEstado
òò& /
;
òò/ 0
	@ViewData
óó 
[
óó 
$str
óó  
]
óó  !
=
óó" #
userName
óó$ ,
;
óó, -
	@ViewData
ôô 
[
ôô 
$str
ôô  
]
ôô  !
=
ôô" #
lstNameF
ôô$ ,
;
ôô, -
	@ViewData
õõ 
[
õõ 
$str
õõ  
]
õõ  !
=
õõ" #
lstNameM
õõ$ ,
;
õõ, -
return
öö 
View
öö 
(
öö 
)
öö 
;
öö 
}
÷÷ 	
}
øø 
}ùù ï
@C:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Global.asax.cs
	namespace		 	
PawnshopUnchuMVC		
 
{

 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
} 	
} 
} Ã
RC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Models\ViewModels\listTblUser.cs
	namespace 	
PawnshopUnchuMVC
 
. 
Models !
.! "

ViewModels" ,
{ 
public 

class 
listTblUser 
{		 
public

 
string

 
ID

 
{

 
get

 
;

 
set

  #
;

# $
}

% &
public 
string 
	userEmail 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
userKey 
{ 
get  #
;# $
set% (
;( )
}* +
public 
TypeUser 
userType  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
public 

enum 
TypeUser 
{ 
Admin 
, 
User 
} 
} ÷
LC:\Users\Diomes\Desktop\Pawnshop\PawnshopUnchuMVC\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str +
)+ ,
], -
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str -
)- .
]. /
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *